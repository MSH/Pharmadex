<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
                template="../templates/process_reg_layout.xhtml">
    <ui:define name="content">

        <h:form id="reghome" enctype="multipart/form-data">
            <p:growl id="growl" showDetail="true"/>

            <h:panelGrid columns="2" columnClasses="menu,content">
                <h:panelGrid columns="2" columnClasses="menu,content">

                    <ui:include src="processprodmenu.xhtml"/>

                    <h:panelGroup styleClass="ui-widget">
                        <ui:decorate template="/templates/prodbannertempl.xhtml">
                            <ui:param name="prodApp" value="#{processProdBn.prodApplications}"/>
                        </ui:decorate>
                        <pe:timeline id="timeline" value="#{processProdBn.timelinesChartData}"
                                     axisPosition="top"
                                     showNavigation="true"
                                     eventStyle="box"
                                     height="130px" width="830px">
                        </pe:timeline>

                        <p:messages id="messages" showDetail="true" showSummary="true"/>

                        <p:tabView id="processtab" style="width: 830px;"
                                   activeIndex="#{processProdBn.selectedTab}" dynamic="true">
                            <p:tab title="#{msgs.application_info}" id="infotab">
                                <h:panelGrid columns="4" cellspacing="10" columnClasses="col1, col2, col1, col2">

                                    <h:outputLabel value="#{msgs.prodName}:"/>
                                    <h:outputLabel value="#{processProdBn.product.prodName}"/>

                                    <h:outputLabel value="#{msgs.prod_cat}:"/>
                                    <h:outputLabel value="#{msgs[processProdBn.product.prodCategory.key]}"/>

                                    <h:outputLabel value="#{msgs.prodgenname}:"/>
                                    <h:outputLabel value="#{processProdBn.product.genName}"/>

                                    <h:outputLabel value="#{msgs.prod_app_type}:"/>
                                    <h:outputLabel value="#{msgs[processProdBn.prodApplications.prodAppType.key]}"/>

                                    <h:outputLabel value="#{msgs.dos_form}"/>
                                    <h:outputLabel value="#{processProdBn.product.dosForm.dosForm}"/>

                                    <h:outputLabel value="Dosage Strength:" style="font-weight: bold;"/>
                                    <h:outputLabel value="#{processProdBn.product.dosStrength}"/>

                                    <h:outputLabel value="#{msgs.dos_unit}"/>
                                    <h:outputLabel value="#{processProdBn.product.dosUnit.uom}"/>

                                    <h:outputLabel value="#{msgs.prod_cat}"/>
                                    <h:outputLabel value="#{msgs[processProdBn.product.prodCategory.key]}"/>

                                    <h:outputLabel value="#{msgs.admin_route}"/>
                                    <h:outputLabel value="#{msgs[processProdBn.product.adminRoute.key]}"/>

                                    <h:outputLabel value="#{msgs.age_group}"/>
                                    <h:outputLabel value="#{msgs[processProdBn.product.ageGroup.key]}"/>

                                    <h:outputLabel value="#{msgs.product_pharmclassif}"/>
                                    <h:outputLabel value="#{processProdBn.product.pharmClassif.displayName}"/>

                                    <h:outputLabel value="#{msgs.prod_desc}"/>
                                    <h:outputLabel value="#{processProdBn.product.prodDesc}"/>

                                    <h:outputLabel value="#{msgs.product_details}"/>
                                    <p:commandButton id="viewLink" value="#{msgs.click_here}"
                                                     action="#{processProdBn.goProdDetails}"
                                                     ajax="false" target="_blank" icon="ui-icon-search"/>
                                </h:panelGrid>


                            </p:tab>

                            <!-- Include workspace specific sequence of tabs. -->
                            <ui:include src="prodscreenverify.xhtml"/>

                            <p:tab title="Sample Request" id="sampletab"
                                   rendered="#{processProdBn.displaySample}">
                                <ui:include src="samplerequestpnl.xhtml"/>
                            </p:tab>


                            <p:tab title="#{msgs.prod_comments}">
                                <p:commandButton icon="ui-icon-document" value="#{msgs.add_comment}"
                                                 onclick="PF('dlg').show()"/>

                                <p:dataTable id="commenttable" value="#{processProdBn.comments}" var="it">
                                    <p:column style="width:120px;">
                                        <p:outputLabel styleClass="ui-icon ui-icon-comment"
                                                       style="display:inline-block;"/>
                                        <p:outputLabel value="#{it.user.name}" styleClass="label"/>

                                        <div style="font-size: smaller;">
                                            <h:outputLabel converter="javax.faces.DateTime" value="#{it.date}"/>
                                        </div>
                                    </p:column>

                                    <p:column>
                                        <div style="padding-left:10px;padding-top:10px;">
                                            <h:outputText value="#{it.comment}"
                                                          escape="false"
                                                          styleClass="text"/>
                                        </div>
                                    </p:column>
                                </p:dataTable>


                            </p:tab>

                            <p:tab title="#{msgs.timeline}"
                                   rendered="#{userSession.admin||userSession.head||userSession.moderator||userSession.reviewer}"
                                   id="timelinetab">

                                <p:dataTable id="timelinetbl" var="timeline" value="#{processProdBn.timeLineList}">
                                    <f:facet name="header">
                                        #{msgs.timeline_table_header}
                                    </f:facet>

                                    <p:column headerText="#{msgs.application_status}">
                                        <h:outputText value="#{msgs[timeline.regState.key]}"
                                                      style="font-weight: bolder; font-size: large;"/>
                                    </p:column>

                                    <p:column headerText="#{msgs.timeline_change_date}">
                                        <h:outputLabel converter="javax.faces.DateTime" value="#{timeline.statusDate}"/>
                                    </p:column>

                                    <p:column headerText="#{msgs.updated_by}">
                                        #{timeline.user.name}
                                    </p:column>

                                    <p:column headerText="#{msgs.global_comment}">
                                        #{timeline.comment}
                                    </p:column>
                                </p:dataTable>


                            </p:tab>

                            <p:tab title="#{msgs.attachments}" id="attachtab"
                                   rendered="#{userSession.admin||userSession.staff||userSession.moderator||userSession.reviewer}">

                                <p:commandButton icon="ui-icon-document" value="#{msgs.adddocument}"
                                                 oncomplete="PF('attachdlg').show()"
                                                 action="#{fileUploadController.prepareUpload}"
                                                 update=":attachdlg" id="addDocBtn"/>

                                <p:dataTable id="attachtable" value="#{fileUploadController.attachments}" var="doc">

                                    <p:column headerText="#{msgs.title}">
                                        <h:outputText value="#{doc.title}"/>
                                    </p:column>

                                    <p:column headerText="#{msgs.filename}">
                                        <h:outputText value="#{doc.fileName}"/>
                                    </p:column>

                                    <p:column headerText="#{msgs.uploaddate}">
                                        <h:outputText converter="javax.faces.DateTime" value="#{doc.createdDate}"/>
                                    </p:column>

                                    <p:column headerText="#{msgs.uploadedby}">
                                        <h:outputText value="#{doc.uploadedBy.name}"/>
                                    </p:column>

                                    <p:column headerText="#{msgs.registration_status}">
                                        <h:outputText value="#{msgs[doc.regState.key]}"/>
                                    </p:column>

                                    <p:column>
                                        <p:commandButton id="downloadLink" value="Download" ajax="false"
                                                         onclick="PrimeFaces.monitorDownload(start, stop)"
                                                         icon="ui-icon-arrowthichk-s">
                                            <p:fileDownload value="#{fileUploadController.fileDownload(doc)}"/>
                                        </p:commandButton>
                                    </p:column>

                                    <p:column>
                                        <p:commandButton id="deleteattach"
                                                         action="#{fileUploadController.deleteDoc(doc)}" ajax="false"
                                                         icon="ui-icon-trash"
                                                         update=":reghome:attachtab:attachtable"/>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>

                            <p:tab title="#{msgs.letters}" id="lettertab">
                                <p:dataTable id="lettertable" value="#{processProdBn.letters}" var="letter">

                                    <p:column headerText="#{msgs.title}">
                                        <h:outputText value="#{letter.title}"/>
                                    </p:column>

                                    <p:column headerText="#{msgs.letter_type}">
                                        <h:outputText value="#{msgs[letter.letterType.key]}"/>
                                    </p:column>

                                    <p:column headerText="#{msgs.filename}">
                                        <h:outputText value="#{letter.fileName}"/>
                                    </p:column>

                                    <p:column headerText="#{msgs.uploaddate}">
                                        <h:outputText converter="javax.faces.DateTime" value="#{letter.createdDate}"/>
                                    </p:column>

                                    <p:column headerText="#{msgs.uploadedby}">
                                        <h:outputText value="#{letter.uploadedBy.name}"/>
                                    </p:column>

                                    <p:column headerText="#{msgs.registration_status}">
                                        <h:outputText value="#{msgs[letter.regState.key]}"/>
                                    </p:column>

                                    <p:column>
                                        <p:commandButton id="downloadletter" value="#{msgs.global_download}" ajax="false"
                                                         onclick="PrimeFaces.monitorDownload(start, stop)"
                                                         icon="ui-icon-arrowthichk-n">
                                            <p:fileDownload value="#{processProdBn.fileDownload(letter)}"/>
                                        </p:commandButton>
                                    </p:column>

                                </p:dataTable>
                            </p:tab>

                            <p:tab title="#{msgs.add_info}" id="addinfotab"
                                   rendered="#{userSession.admin||userSession.staff||userSession.moderator||userSession.reviewer}">

                                <ui:include src="prodprocessaddinfo.xhtml"/>

                            </p:tab>

                            <p:tab title="#{msgs.amdmt_history}" rendered="#{processProdBn.registered}">

                                <p:dataTable id="amdmtHist" value="#{processProdBn.prodAppAmdmts}" var="amdmt">
                                    <p:column headerText="#{msgs.amdmt_type}">
                                        <h:outputText value="#{amdmt.amdmtCategory.amdmtType}"/>
                                    </p:column>

                                    <p:column headerText="#{msgs.amdmt_code}">
                                        <h:outputText value="#{amdmt.amdmtCategory.categoryCD}"/>
                                    </p:column>

                                    <p:column headerText="#{msgs.submitted_date}">
                                        <p:commandLink action="/internal/amdmtdetailsDlg.faces" ajax="false">
                                            <h:outputText converter="javax.faces.DateTime"
                                                          value="#{amdmt.createdDate}"/>
                                            <f:setPropertyActionListener value="#{amdmt}"
                                                                         target="#{amdmtProcessMBean.prodAppAmdmt}"/>
                                        </p:commandLink>
                                    </p:column>

                                    <p:column headerText="#{msgs.amdmt_state}">
                                        <h:outputText value="#{amdmt.amdmtState}"/>
                                    </p:column>

                                    <p:column headerText="#{msgs.submitted_by}">
                                        <h:outputText value="#{amdmt.submittedBy.username}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>

                            <p:tab title="#{msgs.reg_cert}" id="regcerttab" rendered="#{processProdBn.showCert}">

                                <p:commandButton id="regdownload" value="#{msgs.reg_cert}" rendered="#{processProdBn.registered}"
                                                 onclick="PrimeFaces.monitorDownload(start, stop)"
                                                 icon="ui-icon-arrowthichk-n">
                                    <p:fileDownload value="#{fileUploadController.regCertDownload()}"/>
                                </p:commandButton>

                                <p:commandButton id="rejectdownload" value="#{msgs.reg_cert}" rendered="#{!processProdBn.registered}"
                                                 onclick="PrimeFaces.monitorDownload(start, stop)"
                                                 icon="ui-icon-arrowthichk-n">
                                    <p:fileDownload value="#{fileUploadController.rejCertDownload()}"/>
                                </p:commandButton>
                            </p:tab>

                            <p:tab title="#{msgs.processor}" id="process"
                                   rendered="#{userSession.moderator||userSession.head}">
                                <ui:include src="reviewertable.xhtml"/>
                            </p:tab>


                        </p:tabView>

                        <p:blockUI block="processtab" trigger=":reghome:processtab :reghome:saveMenuItem :reghome:addCommentMI :reghome:nextStepMI :reghome:registerMI :reghome:assignModMI
            :reghome:processtab:feerecieved :reghome:processtab:appverify :reghome:processtab:prodverify :reghome:processtab:dosscomplete
            :reghome:processtab:addDocBtn :addCommentFrm:submitButton">
                            <p:graphicImage value="/resources/images/ajax-loader.gif"/>
                        </p:blockUI>



                    </h:panelGroup>
                </h:panelGrid>
            </h:panelGrid>
        </h:form>

        <p:dialog header="#{msgs.assignmoderator}" widgetVar="moderatordlg" resizable="false"
                  id="moderatordlg" modal="true" dynamic="true"
                  rendered="#{userSession.head||userSession.admin||userSession.staff}">
            <h:form>

            <p:panelGrid columns="2" columnClasses="label value">
                <h:outputText value="#{msgs.moderator_name}: "
                              escape="false"
                              styleClass="text"/>

                <p:autoComplete id="mod" value="#{processProdBn.moderator}"
                                completeMethod="#{globalEntityLists.completeModeratorList}" dropdown="true"
                                var="it" itemLabel="#{it.name}" itemValue="#{it.userId}"
                                forceSelection="true"
                                converter="#{userConverter}">
                </p:autoComplete>

            </p:panelGrid>


            <p:commandButton id="submitmoderator" value="#{msgs.global_submit}"
                             action="#{processProdBn.assignModerator}"
                             oncomplete="moderatordlg.hide()" ajax="false"/>
            </h:form>
        </p:dialog>

        <p:dialog header="#{msgs.adddocument}" widgetVar="attachdlg" resizable="false" id="attachdlg"
                  modal="true" dynamic="true">
            <h:form prependId="false">
            <h:panelGrid columns="2" style="margin-bottom:10px">
                <p:outputLabel for="attachtitle" value="#{msgs.title}"/>
                <p:inputText id="attachtitle" value="#{fileUploadController.attach.title}"/>
                <h:outputLabel for="attachcomment" value="#{msgs.global_comment}"/>
                <p:inputTextarea id="attachcomment" value="#{fileUploadController.attach.comment}"
                                 rows="5" cols="50"/>
            </h:panelGrid>

            <p:fileUpload fileUploadListener="#{fileUploadController.handleFileUpload}"
                          mode="advanced" auto="true"
                          update=":reghome:growl :reghome:messages"
                          multiple="false"
                          sizeLimit="10000000">

            </p:fileUpload>

            <p:commandButton id="adddoc" value="#{msgs.global_submit}"
                             action="#{fileUploadController.addDocument}"
                             oncomplete="PF('attachdlg').hide()" update=":reghome:growl :reghome:messages :reghome"/>
            </h:form>
        </p:dialog>


        <p:dialog header="#{msgs.next_step}" widgetVar="stepDlg" resizable="false" modal="true" dynamic="true"
                  rendered="#{userSession.admin||processProdBn.checkReviewStatus||userSession.head||userSession.staff||userSession.moderator}">
            <ui:include src="nextstepdlg.xhtml"/>
        </p:dialog>

        <p:dialog header="#{msgs.issue_invoice}" widgetVar="invoicedlg" resizable="true" id="invoicedlg"
                  modal="true" rendered="false" dynamic="true">
            <h:form>
            <h:panelGrid columns="4" columnClasses="col1 col2 col1 col2" cellpadding="10"
                         cellspacing="10">
                <p:outputLabel value="#{msgs.reg_number}"/>
                <h:outputText value="#{renewalMbn.selProductApp.prodRegNo}"/>

                <p:outputLabel value="#{msgs.prodName}"/>
                <h:outputText value="#{renewalMbn.selProd.prodName}"/>

                <p:outputLabel value="#{msgs.prodgenname}"/>
                <h:outputText value="#{renewalMbn.selProd.genName}"/>

                <p:outputLabel value="#{msgs.applicant_name}"/>
                <h:outputText value="#{renewalMbn.selProductApp.applicant.appName}"/>

                <p:outputLabel value="#{msgs.expiry_date}"/>
                <h:outputText value="#{renewalMbn.selProductApp.regExpiryDate}"/>

                <p:outputLabel value="#{msgs.new_ecpiry_date}" for="newexpiryDate"/>
                <p:calendar value="#{renewalMbn.invoice.newExpDate}" id="newexpiryDate"
                            showOn="button" pattern="#{userAccessMBean.workspace.
                            datePattern}"/>

                <p:outputLabel value="#{msgs.invoice_amt}" for="invamt"/>
                <p:inputText value="#{renewalMbn.invoice.invoiceAmt}" id="invamt"/>

                <p:outputLabel value="#{msgs.invoice_no}" for="invno"/>
                <p:inputText value="#{renewalMbn.invoice.invoiceNumber}" id="invno"/>

            </h:panelGrid>

            <h:panelGrid columns="2" style="margin-top:10px">
                <p:commandButton id="createinvoice" value="#{msgs.global_submit}"
                                 oncomplete="invoicedlg.hide()"
                                 icon="ui-icon-disk" ajax="true" action="#{renewalMbn.createInvoice}"/>
                <p:commandButton id="cnclinvoice" type="button" value="Clear"
                                 onclick="PF('invoicedlg').hide()"
                                 icon="ui-icon-close" ajax="false"/>
            </h:panelGrid>
            </h:form>
        </p:dialog>

        <p:dialog header="#{msgs.report_payment}" widgetVar="reportpaymentdlg" resizable="true"
                  id="reportpaymentdlg" dynamic="true"
                  modal="true">
        <h:form>
            <h:panelGrid columns="4" columnClasses="col1 col2 col1 col2" cellpadding="10"
                         cellspacing="10">
                <p:outputLabel value="#{msgs.reg_number}"/>
                <h:outputText value="#{renewalMbn.selProductApp.prodRegNo}"/>

                <p:outputLabel value="#{msgs.prodName}"/>
                <h:outputText value="#{renewalMbn.selProd.prodName}"/>

                <p:outputLabel value="#{msgs.prodgenname}"/>
                <h:outputText value="#{renewalMbn.selProd.genName}"/>

                <p:outputLabel value="#{msgs.applicant_name}"/>
                <h:outputText value="#{renewalMbn.selProductApp.applicant.appName}"/>

                <p:outputLabel value="#{msgs.expiry_date}"/>
                <h:outputText value="#{renewalMbn.selProductApp.regExpiryDate}"/>

                <p:outputLabel value="#{msgs.new_ecpiry_date}" for="newexpiryDate"/>
                <h:outputText value="#{renewalMbn.invoice.newExpDate}" id="newexpiryDate"/>

                <p:outputLabel value="#{msgs.invoice_amt}" for="payinvamt"/>
                <h:outputText value="#{renewalMbn.invoice.invoiceAmt}" id="payinvamt"/>

                <p:outputLabel value="#{msgs.invoice_no}" for="payinvno"/>
                <h:outputText value="#{renewalMbn.invoice.invoiceNumber}" id="payinvno"/>

                <p:outputLabel value="#{msgs.payment_amt}" for="payamt"/>
                <p:inputText value="#{renewalMbn.payment.paymentAmt}" id="payamt"/>

                <p:outputLabel value="#{msgs.reciept_no}" for="receiptNo"/>
                <p:inputText value="#{renewalMbn.payment.receiptNo}" id="receiptNo"/>

                <p:outputLabel value="#{msgs.tracking_no}" for="trackingNo"/>
                <p:inputText value="#{renewalMbn.payment.trackingNo}" id="trackingNo"/>

            </h:panelGrid>

            <h:panelGrid columns="2" style="margin-top:10px">
                <p:commandButton id="reportpayment" value="#{msgs.global_submit}"
                                 oncomplete="reportpaymentdlg.hide()"
                                 icon="ui-icon-disk" ajax="true" action="#{renewalMbn.reportPayment}"/>
                <p:commandButton id="cnclpayment" type="button" value="Clear"
                                 onclick="PF('reportpaymentdlg').hide()"
                                 icon="ui-icon-close" ajax="false"/>
            </h:panelGrid>
        </h:form>
        </p:dialog>

<!--
        <p:dialog header="#{msgs.renew}" widgetVar="renewdlg" resizable="true" id="renewdlg"
                  modal="true" dynamic="true">
        <h:form>
            <h:panelGrid columns="4" columnClasses="col1 col2 col1 col2" cellpadding="10"
                         cellspacing="10">
                <p:outputLabel value="#{msgs.reg_number}"/>
                <h:outputText value="#{renewalMbn.selProductApp.prodRegNo}"/>

                <p:outputLabel value="#{msgs.prodName}"/>
                <h:outputText value="#{renewalMbn.selProd.prodName}"/>

                <p:outputLabel value="#{msgs.prodgenname}"/>
                <h:outputText value="#{renewalMbn.selProd.genName}"/>

                <p:outputLabel value="#{msgs.applicant_name}"/>
                <h:outputText value="#{renewalMbn.selProductApp.applicant.appName}"/>

                <p:outputLabel value="#{msgs.expiry_date}"/>
                <h:outputText value="#{renewalMbn.selProductApp.regExpiryDate}"/>

                <p:outputLabel value="#{msgs.new_ecpiry_date}"/>
                <h:outputText value="#{renewalMbn.invoice.newExpDate}"/>

                <p:outputLabel value="#{msgs.invoice_amt}"/>
                <h:outputText value="#{renewalMbn.invoice.invoiceAmt}"/>

                <p:outputLabel value="#{msgs.invoice_no}"/>
                <h:outputText value="#{renewalMbn.invoice.invoiceNumber}"/>

                <p:outputLabel value="#{msgs.payment_amt}"/>
                <h:outputText value="#{renewalMbn.payment.paymentAmt}"/>

                <p:outputLabel value="#{msgs.reciept_no}"/>
                <h:outputText value="#{renewalMbn.payment.receiptNo}"/>

                <p:outputLabel value="#{msgs.tracking_no}"/>
                <h:outputText value="#{renewalMbn.payment.trackingNo}"/>

            </h:panelGrid>

            <h:panelGrid columns="2" style="margin-top:10px">
                <p:commandButton value="#{msgs.global_submit}" oncomplete="renewdlg.hide()"
                                 icon="ui-icon-disk" ajax="false" action="#{renewalMbn.renew}"/>
                <p:commandButton type="button" value="Clear" onclick="('renewdlg').hide()"
                                 icon="ui-icon-close" ajax="false"/>
            </h:panelGrid>
        </h:form>
        </p:dialog>
-->

        <p:dialog header="#{msgs.amendment}" widgetVar="dlgAmdment" showEffect="fade" hideEffect="fade"
                  modal="true" dynamic="true"
                  id="dlgAmdment" width="800px" height="500px">
        <h:form id="amdmtCatFrm">
            <ui:include src="amdmtCategoryDlg.xhtml"/>
        </h:form>
        </p:dialog>


        <p:dialog header="#{msgs.send_mail}" widgetVar="maildlg" resizable="false" modal="true" dynamic="true">
        <h:form>
            <h:panelGrid columns="2" style="margin-bottom:10px">
                <h:outputLabel for="tomail" value="#{msgs.mail_to}"/>
                <h:inputText id="tomail" value="#{processProdBn.mail.mailto}"/>
                <h:outputLabel for="subject" value="#{msgs.letter_subject}: "/>
                <h:inputText id="subject" value="#{processProdBn.mail.subject}"/>
                <h:outputLabel for="message" value="#{msgs.message}:"/>
                <p:inputTextarea id="message" value="#{processProdBn.mail.message}" rows="10"
                                 cols="50"/>
            </h:panelGrid>

            <p:commandButton id="sendmessage" value="#{msgs.global_submit}"
                             action="#{processProdBn.sendMessage}"
                             oncomplete="mailDlg.hide()" update="@form"/>

        </h:form>
        </p:dialog>


        <p:dialog header="#{msgs.register_product}" widgetVar="regDlg" resizable="false" id="regdlg" modal="true"
                  dynamic="true">
            <h:form id="regdatedlg">
                <h:panelGrid columns="2" style="margin-bottom:10px">
                    <p:outputLabel value="#{msgs.registration_date}"/>
                    <p:calendar value="#{processProdBn.prodApplications.registrationDate}" id="regDate" showOn="button"
                                required="true" pattern="#{userAccessMBean.workspace.datePattern}">
                        <p:ajax event="dateSelect" listener="#{processProdBn.dateChange}" update=":regdatedlg"/>
                    </p:calendar>
                    <p:outputLabel value="#{msgs.expiry_date}"/>
                    <p:calendar value="#{processProdBn.prodApplications.regExpiryDate}" id="expiryDate" showOn="button"
                                required="true" pattern="#{userAccessMBean.workspace.datePattern}"/>

                </h:panelGrid>

                <p:commandButton id="regBtn" value="#{msgs.register_product}" action="#{processProdBn.registerProduct}"
                                 oncomplete="regDlg.hide()" icon="ui-icon-gear" ajax="false"
                                 update=":reghome:growl :reghome:messages :reghome :regdatedlg"/>
            </h:form>

        </p:dialog>

        <p:dialog header="#{msgs.add_comment}" widgetVar="dlg" resizable="false" id="commentdlg" modal="true" dynamic="true">
            <h:form id="addCommentFrm">
                <h:panelGrid columns="2" style="margin-bottom:10px">
                    <h:outputLabel for="commenttext" value="Enter Comment:"/>
                    <p:inputTextarea id="commenttext" value="#{processProdBn.selComment.comment}" rows="5" cols="50"/>
<!--                    <h:outputLabel value="Internal Comment"/>
                    <p:selectBooleanCheckbox value="#{processProdBn.selComment.internal}" itemLabel="Yes"/>
                    -->
                </h:panelGrid>

                <p:commandButton id="submitButton" value="#{msgs.global_submit}" action="#{processProdBn.addComment}"
                                 oncomplete="PF('dlg').hide()"
                                 update=":reghome:processtab:commenttable :addCommentFrm :reghome:growl :reghome:messages"/>
            </h:form>
        </p:dialog>


        <p:dialog modal="true" widgetVar="statusDialog" header="Status" draggable="false" closable="false"
                  resizable="false" dynamic="true">
            <p:graphicImage value="/resources/images/ajax-loader.gif"/>
        </p:dialog>

    </ui:define>
    <script type="text/javascript">
        function start() {
            PF('statusDialog').show();
        }

        function stop() {
            PF('statusDialog').hide();
        }
    </script>
</ui:composition>


