<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="../templates/registration_layout.xhtml">
    <ui:define name="content">
        <div class="post">
            <h1 class="title ui-widget-header ui-corner-all">Submitted Applications</h1>
        </div>

        <h:form prependId="false">
            <p:panel id="data" toggleable="true" toggleSpeed="250" header="Submitted Applications">
                <f:facet name="header">
                    <h:outputText value="Applications"/>
                </f:facet>
                <h:outputFormat id="noRecordsFound" value="#{msgs.label_no_records_found}"
                                rendered="#{empty prodAppMBean.prodApplicationsList}">
                    <f:param value="Apps"/>
                </h:outputFormat>
                <p:dataTable id="applicantions" var="applicantion" value="#{prodAppMBean.prodApplicationsList}"
                             selectionMode="single"
                             selection="#{prodAppMBean.selectedApplication}" rowKey="#{applicantion.id}">
                    <f:facet name="header">
                        Click "View" button after selecting a row to see details
                    </f:facet>

                    <p:column headerText="Product Name">
                        <p:commandLink value="#{applicantion.prod.prodName}" action="/internal/processreg.faces"
                                       ajax="false">
                            <f:setPropertyActionListener value="#{applicantion}"
                                                         target="#{processProdBn.prodApplications}"/>
                        </p:commandLink>
                    </p:column>


                    <p:column headerText="Generic Name">
                        #{applicantion.prod.genName}
                    </p:column>

                    <p:column headerText="Registration Status">
                        #{msgs[applicantion.regState.key]}
                    </p:column>

                    <p:column headerText="Date Submitted">
                        <h:outputLabel converter="javax.faces.DateTime" value="#{applicantion.submitDate}"/>
                    </p:column>

                    <p:column headerText="#{msgs.applicant_name}">
                        #{applicantion.prod.applicant.appName}
                    </p:column>

                    <f:facet name="footer">
                        <p:commandButton value="View" icon="ui-icon-search"
                                         update="@form" action="#{prodAppMBean.onRowSelect}"/>
                    </f:facet>

                </p:dataTable>
            </p:panel>

        </h:form>
    </ui:define>
</ui:composition>
