<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core"
                xmlns:o="http://omnifaces.org/ui"
                template="../templates/admin_layout.xhtml">
    <ui:define name="content">
        <div class="post">
            <h1 class="title ui-widget-header ui-corner-all"> #{msgs.piporder}</h1>
        </div>

        <h:form prependId="false" id="reghome">
            <p:growl id="growl"/>
            <p:messages id="messages" showDetail="true"/>

            <div align="right">
                <p:commandButton value="#{msgs.global_withdraw}" rendered="#{pIPOrderBn.showWithdrawn}"
                                 action="#{pIPOrderBn.initComment}"
                                 oncomplete="PF('withdrawDlg').show()" id="withdraw"
                                 >
                </p:commandButton>
                <p:commandButton value="#{msgs.global_submit}" rendered="#{pIPOrderBn.showSubmit}"
                                 oncomplete="if (!args.validationFailed) PF('confirmDlg').show()"
                                 update="messages growl"
                                 process="@form"/>
                <p:commandButton action="#{pIPOrderBn.cancelOrder}" value="#{msgs.global_cancel}" ajax="false"
                                 immediate="true"/>
            </div>

            <div style="height:10px"/>

            <ui:decorate template="appinfosub.xhtml">
                <ui:param name="regHomeData" value="#{pIPOrderBn}"/>
                <ui:param name="appSelectData" value="#{pIPAppSelectBn}"/>
                <ui:param name="displayLH" value="false"/>
            </ui:decorate>

            <div style="height:10px"/>

            <p:panel header="#{msgs.general_info}">
                <h:panelGrid columns="1">
                    <p:outputLabel value="Please select the currency to be used for this order." styleClass="hint"/>
                    <p:outputLabel/>
                    <p:outputLabel value="Note: The currency you select will be used for the entire transactions including freight charges and product unit price.
                You can only use one currency per order. You cannot mix currencies" styleClass="hint"/>
                </h:panelGrid>

                <h:panelGrid columns="3" cellspacing="10" columnClasses="col1, col2, col3">
                    <p:outputLabel value="#{msgs.currency}" for="currdd"/>
                    <p:selectOneMenu id="currdd" value="#{pIPOrderBn.pipOrder.currency.id}"
                                     requiredMessage="#{msgs.valid_dos_form}" required="true"
                                     disabled="#{!pIPOrderBn.showSubmit}">
                        <p:ajax event="change" listener="#{pIPOrderBn.currChangeListener}"/>
                        <f:selectItem itemLabel="-" itemValue=""/>
                        <f:selectItems value="#{globalEntityLists.currencies}" var="curr"
                                       itemLabel="#{curr.currName}"
                                       itemValue="#{curr.id}"/>
                    </p:selectOneMenu>
                    <p:message for="currdd" showSummary="true" showDetail="false"/>

                    <p:outputLabel value="#{msgs.ship_inst}" for="shipinst"/>
                    <p:inputText id="shipinst" required="true" value="#{pIPOrderBn.pipOrder.shippingInstruction}"
                                 readonly="#{!pIPOrderBn.showSubmit}"/>
                    <p:message for="shipinst" showSummary="true"/>


                    <p:outputLabel value="#{msgs.portof_entry}" for="port"/>
                    <p:inputText id="port" required="true" readonly="#{!pIPOrderBn.showSubmit}"
                                 value="#{pIPOrderBn.pipOrder.entryPort}"/>
                    <p:message for="port" showSummary="true"/>

                    <p:outputLabel value="#{msgs.delivery}" for="delivery"/>
                    <p:inputText id="delivery" value="#{pIPOrderBn.pipOrder.delivery}"
                                 readonly="#{!pIPOrderBn.showSubmit}"/>
                    <p:message for="delivery" showSummary="true"/>

                    <p:outputLabel value="#{msgs.payment_info}" for="payinfo"/>
                    <p:inputText id="payinfo" required="true" value="#{pIPOrderBn.pipOrder.paymentMethod}"
                                 readonly="#{!pIPOrderBn.showSubmit}"/>
                    <p:message for="payinfo" showSummary="true"/>

                    <p:outputLabel value="#{msgs.performa}" for="proforma"/>
                    <p:inputText id="proforma" value="#{pIPOrderBn.pipOrder.performa}"
                                 readonly="#{!pIPOrderBn.showSubmit}"/>
                    <p:message for="proforma" showSummary="true"/>

                    <p:outputLabel value="#{msgs.product_freight}" for="freight"/>
                    <p:inputText id="freight" required="true" value="#{pIPOrderBn.pipOrder.freight}"
                                 readonly="#{!pIPOrderBn.showSubmit}"/>
                    <p:message for="freight" showSummary="true"/>

                    <p:outputLabel value="#{msgs.global_comment}" for="comment"/>
                    <p:inputText id="comment" value="#{pIPOrderBn.pipOrder.comment}"
                                 readonly="#{!pIPOrderBn.showSubmit}"/>
                    <p:message for="comment" showSummary="true"/>

                </h:panelGrid>

            </p:panel>

            <div style="height:10px"/>

            <p:panel header="#{msgs.product_details}">
                <h:panelGrid columns="1">
                    <p:outputLabel
                            value="Please specify all the products that will imported as part of this order by clicking the add button"
                            styleClass="hint"/>

                    <p:commandButton value="#{msgs.global_add}" oncomplete="PF('orderdetailDlg').show()"
                                     rendered="#{pIPOrderBn.showSubmit}"
                                     action="#{pIPOrderBn.initAddProd}" process="@form" update=":orderdetailfrm"/>

                    <p:dataTable id="ordertable" var="order" value="#{pIPOrderBn.pipProds}" style="width:100%;"
                                 sortBy="#{order.pipOrder.applicant.applcntId}">

                        <p:column headerText="#{msgs.prod_no}" width="40">
                            <h:outputText value="#{order.productNo}"/>
                        </p:column>

                        <p:column headerText="#{msgs.prod_name}" width="26%">
                            <h:outputText value="#{order.productName}"/>
                        </p:column>

                        <p:column headerText="#{msgs.dos_strength}" width="50">
                            <h:outputText value="#{order.dosStrength}"/>
                        </p:column>

                        <p:column headerText="#{msgs.dos_unit}">
                            <h:outputText value="#{order.dosUnit.uom}"/>
                        </p:column>

                        <p:column headerText="#{msgs.dos_form}">
                            <h:outputText value="#{order.dosForm.dosForm}"/>
                        </p:column>


                        <p:column headerText="#{msgs.prod_presentation}" width="21%">
                            <h:outputText value="#{order.productDesc}"/>
                        </p:column>

                        <p:column headerText="#{msgs.global_quantity}" width="50">
                            <h:outputText value="#{order.quantity}"/>
                        </p:column>

                        <p:column headerText="#{msgs.product_pricing}">
                            <h:outputText value="#{order.unitPrice}">
                                <f:convertNumber type="currency"
                                                 currencySymbol="#{pIPOrderBn.pipOrder.currency.currSym}"/>
                            </h:outputText>

                        </p:column>

                        <p:column headerText="#{msgs.total_price}">
                            <h:outputText value="#{order.totalPrice}">
                                <f:convertNumber type="currency"
                                                 currencySymbol="#{pIPOrderBn.pipOrder.currency.currSym}"/>
                            </h:outputText>
                        </p:column>

                        <p:column rendered="#{!pIPOrderBn.showWithdrawn}" width="25">
                            <p:commandButton action="#{pIPOrderBn.removeProd(order)}" icon="ui-icon-trash"
                                             update=":reghome :reghome:growl" immediate="true">
                            </p:commandButton>
                        </p:column>

                        <p:summaryRow>
                            <p:column colspan="8" style="text-align:right">
                                <h:outputText value="Grand Total(includes Freight):"/>
                            </p:column>
                            <p:column>
                                <h:outputText value="#{pIPOrderBn.pipOrder.totalPrice}">
                                    <f:convertNumber type="currency"
                                                     currencySymbol="#{pIPOrderBn.pipOrder.currency.currSym}"/>
                                </h:outputText>
                            </p:column>
                        </p:summaryRow>
                    </p:dataTable>
                </h:panelGrid>
            </p:panel>

            <div style="height:10px"/>

            <p:panel header="#{msgs.global_comment}"
                     rendered="#{not empty pIPOrderBn.pipOrder and not empty pIPOrderBn.pipOrder.pOrderComments}">
                <p:dataTable id="commenttable" value="#{pIPOrderBn.pipOrder.pOrderComments}" var="it">
                    <p:column style="width:120px;" rendered="#{it.external}">
                        <p:outputLabel styleClass="ui-icon ui-icon-comment"
                                       style="display:inline-block;"/>
                        <p:outputLabel value="#{it.user.name}" styleClass="label"/>

                        <div style="font-size: smaller;">
                            <h:outputLabel converter="javax.faces.DateTime" value="#{it.date}"/>
                        </div>
                    </p:column>

                    <p:column rendered="#{it.external}">
                        <div style="padding-left:10px;padding-top:10px;">
                            <h:outputText value="#{it.comment}"
                                          escape="false"
                                          styleClass="text"/>
                        </div>
                    </p:column>
                    <p:column rendered="#{it.external}">
                        #{it.recomendType}
                    </p:column>
                </p:dataTable>


            </p:panel>

            <div style="height:10px"/>

            <p:panel header="#{msgs.attachments}">
                <h:panelGrid columns="1">
                    <p:commandLink
                            value="Click here to see what documents need to be uploaded"
                            onclick="window.open('uploaddochint.xhtml')"
                            styleClass="hint"/>
                    <p:outputLabel value="#{msgs.reg_form_attach_hint2}" styleClass="hint"/>


                    <p:commandButton icon="ui-icon-document" value="#{msgs.adddocument}"
                                     oncomplete="PF('attachdlg').show()"
                                     rendered="#{pIPOrderBn.showAddButton}"
                                     action="#{pIPOrderBn.prepareUpload}"
                                     update=":attachdlg" id="addDocBtn"/>

                    <p:dataTable id="attachtable" value="#{pIPOrderBn.pOrderDocs}" var="doc">

                        <p:column headerText="#{msgs.title}">
                            <h:outputText value="#{doc.title}"/>
                        </p:column>

                        <p:column headerText="#{msgs.filename}">
                            <h:outputText value="#{doc.fileNameOnly}"/>
                        </p:column>

                        <p:column headerText="#{msgs.uploaddate}">
                            <h:outputText converter="javax.faces.DateTime" value="#{doc.createdDate}"/>
                        </p:column>

                        <p:column headerText="#{msgs.uploadedby}">
                            <h:outputText value="#{doc.uploadedBy.name}"/>
                        </p:column>

                        <p:column headerText="#{msgs.application_status}">
                            <h:outputText value="#{msgs[doc.regState.key]}"/>
                        </p:column>

                        <p:column>
                            <p:commandButton id="downloadLink" value="Download" ajax="false"
                                             onclick="PrimeFaces.monitorDownload(start, stop)"
                                             icon="ui-icon-arrowthichk-s">
                                <p:fileDownload value="#{pIPOrderBn.fileDownload(doc)}"/>
                            </p:commandButton>
                        </p:column>

                        <p:column rendered="#{pIPOrderBn.showAddButton}">
                            <p:commandButton id="deleteattach"
                                             action="#{pIPOrderBn.deleteDoc(doc)}" ajax="false"
                                             icon="ui-icon-trash"
                                             update=":reghome:attachtab:attachtable"/>
                        </p:column>
                    </p:dataTable>
                </h:panelGrid>
            </p:panel>

            <p:panel header="#{msgs.checklist}">
                <p:dataTable var="checkList" value="#{pIPOrderBn.pOrderChecklists}" style="width:100%;">
                    <p:column headerText="" colspan="3" rendered="#{checkList.pipOrderLookUp.header}"
                              style="background-color: bisque;font-weight: bolder;">
                        <h:outputLabel value="#{checkList.pipOrderLookUp.name}"/>
                    </p:column>
                    <p:column rendered="#{!checkList.pipOrderLookUp.header}">
                        <h:outputLabel value="#{checkList.pipOrderLookUp.no}"/>
                    </p:column>
                    <p:column rendered="#{!checkList.pipOrderLookUp.header}">
                        <h:outputLabel value="#{checkList.pipOrderLookUp.name}"/>
                    </p:column>
                    <p:column rendered="#{!checkList.pipOrderLookUp.header and pIPOrderBn.showSubmit}">
                        <p:selectOneButton id="console" value="#{checkList.value}"
                                           rendered="#{checkList.pipOrderLookUp.optional}">
                            <f:selectItems value="#{globalLists.yesNoNA}" var="value" itemLabel="#{msgs[value.key]}"/>
                        </p:selectOneButton>
                        <p:selectOneButton id="console2" value="#{checkList.value}"
                                           rendered="#{!checkList.pipOrderLookUp.optional}">
                            <f:selectItems value="#{globalLists.yesNo}" var="value" itemLabel="#{msgs[value.key]}"/>
                        </p:selectOneButton>
                    </p:column>
                    <p:column rendered="#{!checkList.pipOrderLookUp.header and !pIPOrderBn.showSubmit}">
                        <h:outputLabel value="#{msgs[checkList.value.key]}"/>
                    </p:column>
                </p:dataTable>
            </p:panel>


            <div align="center" style="height: 60px">
                <p:commandButton value="#{msgs.global_submit}" rendered="#{pIPOrderBn.showSubmit}"
                                 oncomplete="if (!args.validationFailed) PF('confirmDlg').show()"
                                 update="messages growl"
                                 process="@form"/>
                <p:commandButton action="#{pIPOrderBn.cancelOrder}" value="#{msgs.global_cancel}" ajax="false"
                                 immediate="true"/>
            </div>

        </h:form>

        <p:dialog header="#{msgs.global_agreement}" widgetVar="confirmDlg" id="confirmdlg" resizable="true"
                  dynamic="true"
                  modal="true">
            <h:form>
                <div>
                    <p>
                        <ol>
                            <li>For a medicine to have port clearance permission by the authority
                                <ul>
                                    <li>If the medicine has three years or more shelf life, when it arrives in the port of entry it should have 60% or more of its shelf life.</li>
                                    <li>If the medicine has two years or less shelf life, when it arrives in the port of entry it should have 50% or more of its shelf life.</li>
                                    <li>For emergency cases, the medicine should have a shelf life of more than 50% of its shelf life on arrival at port entry of the country</li>
                                </ul>
                            </li>
                            <li>Language used for writing label, leaflet and other documents shall be in English</li>
                            <li>All packing should be suitable for road, air and sea transport under tropical conditions</li>
                            <li>
                                The label of immediate container:-
                                <ul>
                                    <li>The name of the product, brand and generic/INN</li>
                                    <li>Pharmaceutical dosage form and route of administration</li>
                                    <li>Qualitative and quantitative composition of active ingredient(s)</li>
                                    <li>Quantity in container, technical directions for use</li>
                                    <li>Handling and storage requirements</li>
                                    <li>Batch number, manufacturing and expiry date</li>
                                    <li>Name and address of the company</li>
                                </ul>
                            </li>
                            <li>Accompanying invoices should be as per the purchase order including Batch number, manufacturing and expiry date of each item</li>
                            <li>Every product should be accompanied by a leaflet in its immediate container. A leaflet must bear adequate information for use and it should at least include:
                                <ul>
                                    <li>The name of the product: brand and generic/INN</li>
                                    <li>Description appearance, pharmaceutical dosage form and route of administration</li>
                                    <li>Qualitative and quantitative composition of active ingredients</li>
                                    <li>Clinical pharmacology, indication(s), warning, precautions, contraindications, adverse reactions/side effects</li>
                                    <li>Dosage and administration (direction for use)</li>
                                    <li>Over dosage, storage instruction, package quantity, name and address of manufacturer.</li>
                                </ul>
                            </li>
                        </ol>
                    </p>
                </div>
                <p:commandButton value="#{msgs.global_yes}" styleClass="ui-confirmdialog-yes"
                                 icon="ui-icon-check"
                                 action="#{pIPOrderBn.saveOrder}" ajax="false" oncomplete="PF('confirmDlg').hide()"/>
                <p:commandButton value="#{msgs.global_no}" styleClass="ui-confirmdialog-no"
                                 action="#{pIPOrderBn.noOrder}"
                                 icon="ui-icon-close" immediate="true" oncomplete="PF('confirmDlg').hide()"/>
            </h:form>
        </p:dialog>

        <p:dialog header="#{msgs.order_detail}" widgetVar="orderdetailDlg" id="orderdetaildlg" resizable="true"
                  modal="true" dynamic="true">
            <h:form id="orderdetailfrm">
                <h:panelGrid columns="3" cellspacing="10" columnClasses="col1, col2, col3" id="order_detail">

                    <p:outputLabel value="#{msgs.prod_name}" for="prodname"/>
                    <!--
                    <p:inputText id="prodname" required="true" value="#{pIPOrderBn.pipProd.productName}"/>
                    required="true" requiredMessage="#{msgs.valid_value_req}"
                    -->
                    <p:autoComplete id="prodname" widgetVar="prodnamevar"
                                    value="#{pIPOrderBn.product}"
                                    maxResults="10" scrollHeight="300"
                                    forceSelection="false"
                                    completeMethod="#{pIPOrderBn.completeProducts}"
                                    var="p" itemLabel="#{p.prodName}" itemValue="#{p.id}"
                                    converter="#{productConverter}"
                                    dropdown="true"
                                    >
                        <p:ajax event="itemSelect"
                                update="orderdetailfrm"
                                listener="#{pIPOrderBn.productSelectListenener}"
                                partialSubmit="true" process="@this"/>
                    </p:autoComplete>
                    <p:message for="prodname" showSummary="true"/>

                    <p:outputLabel value="#{msgs.dos_form}" for="dosForm"/>
                    <p:selectOneMenu id="dosForm" value="#{pIPOrderBn.pipProd.dosForm.uid}"
                                     requiredMessage="#{msgs.valid_dos_form}" required="true">
                        <f:selectItem itemLabel="-" itemValue=""/>
                        <f:selectItems value="#{globalEntityLists.dosageForms}" var="dosForm"
                                       itemLabel="#{msgs[dosForm.key]}"
                                       itemValue="#{dosForm.uid}"/>
                    </p:selectOneMenu>
                    <p:message for="dosForm" showSummary="true" showDetail="false"/>

                    <p:outputLabel value="#{msgs.dos_unit}" for="dosUnit"/>
                    <p:selectOneMenu id="dosUnit" value="#{pIPOrderBn.pipProd.dosUnit.id}"
                                     requiredMessage="#{msgs.valid_dos_form}" required="true">
                        <f:selectItem itemLabel="-" itemValue=""/>
                        <f:selectItems value="#{globalEntityLists.dosUoms}" var="dosUom" itemLabel="#{dosUom.uom}"
                                       itemValue="#{dosUom.id}"/>
                    </p:selectOneMenu>
                    <p:message for="dosUnit" showSummary="true" showDetail="false"/>

                    <p:outputLabel value="#{msgs.dos_strength}" for="dosStrength"/>
                    <p:inputText id="dosStrength" value="#{pIPOrderBn.pipProd.dosStrength}" title="DosStrength"
                                 required="true" requiredMessage="#{msgs.dos_strength}: Value required">
                    </p:inputText>
                    <p:message for="dosStrength" severity="error" showSummary="true" showDetail="false"/>

                    <p:outputLabel value="#{msgs.prod_presentation}" for="proddesc"/>
                    <p:inputText id="proddesc" required="true" value="#{pIPOrderBn.pipProd.productDesc}"/>
                    <p:message for="proddesc" showSummary="true"/>

                    <p:outputLabel value="#{msgs.product_shelflife}" for="shelflife"/>
                    <p:inputText id="shelflife" value="#{pIPOrderBn.pipProd.shelfLife}"
                                 required="true" requiredMessage="#{msgs.product_shelflife}: Value required"/>

                    <p:message for="shelflife" showSummary="true" showDetail="false"/>

                    <p:outputLabel value="#{msgs.manuf_name}" for="manufName"/>
                    <!--
                    <p:inputText id="manufName" value="#{pIPOrderBn.pipProd.manufName}"
                                 required="true" requiredMessage="#{msgs.manuf_name}: Value required"/>
                     -->
                    <p:autoComplete
                        id="manufName"  value="#{pIPOrderBn.pipProd.manufName}"
                        required="true" requiredMessage="#{msgs.manuf_name}: Value required"
                        minQueryLength="3" scrollHeight="300"
                        forceSelection="false"
                        completeMethod="#{pIPOrderBn.completeManufacturer}" dropdown="true">
                    </p:autoComplete>
                    <p:message for="manufName" showSummary="true" showDetail="false"/>

                    <p:outputLabel value="#{msgs.pharmacy_address}" for="manufSite"/>
                    <p:inputText id="manufSite" value="#{pIPOrderBn.pipProd.manufSite}"/>
                    <p:message for="manufSite" showSummary="true" showDetail="false"/>

                    <o:outputLabel value="#{msgs.applicant_country}" for="cntry"/>
                    <p:autoComplete value="#{pIPOrderBn.pipProd.country}" id="cntry"
                                    completeMethod="#{globalEntityLists.completeCountryList}" dropdown="true"
                                    var="it" itemLabel="#{it.countryName}" itemValue="#{it}" forceSelection="true"
                                    required="true">
                        <o:converter converterId="omnifaces.ListConverter" list="#{globalEntityLists.countries}"/>
                    </p:autoComplete>
                    <p:message for="cntry" showSummary="true"/>

                    <p:outputLabel value="#{msgs.global_quantity}" for="quant"/>
                    <p:inputText id="quant" required="true" value="#{pIPOrderBn.pipProd.quantity}">
                        <p:ajax event="keyup" update=":orderdetailfrm:total" process="@form"
                                listener="#{pIPOrderBn.calculateTotalPrice}"></p:ajax>
                    </p:inputText>
                    <p:message for="quant" showSummary="true"/>

                    <p:outputLabel value="#{msgs.product_pricing}" for="price"/>
                    <p:inputText id="price" required="true" value="#{pIPOrderBn.pipProd.unitPrice}">
                        <p:ajax event="keyup" update=":orderdetailfrm:total" process="@form"
                                listener="#{pIPOrderBn.calculateTotalPrice}"></p:ajax>
                    </p:inputText>
                    <p:message for="price" showSummary="true"/>

                    <p:outputLabel value="#{msgs.total_price}" for="total"/>
                    <p:outputLabel id="total" value="#{pIPOrderBn.pipProd.totalPrice}" styleClass="label"
                                   style="width: 140px;">
                        <f:convertNumber type="currency" currencySymbol="#{pIPOrderBn.pipOrder.currency.currSym}"/>
                    </p:outputLabel>
                    <p:outputLabel/>

                    <p:outputLabel value="#{msgs.currency}"/>
                    <p:outputLabel id="curr" value="#{pIPOrderBn.pipProd.currency}"/>
                </h:panelGrid>

                <h:panelGroup>
                    <p:commandButton action="#{pIPOrderBn.addProd}" ajax="true"
                                     value="#{msgs.global_add}"
                                     oncomplete="if (!args.validationFailed) PF('orderdetailDlg').hide()"
                                     process=":orderdetailfrm" update=":reghome:ordertable @form"/>
                    <p:commandButton action="#{pIPOrderBn.cancelAddProd}" immediate="true" ajax="true"
                                     value="#{msgs.global_cancel}" oncomplete="PF('orderdetailDlg').hide()"/>
                </h:panelGroup>

            </h:form>
        </p:dialog>

        <p:dialog header="#{msgs.adddocument}" widgetVar="attachdlg" resizable="false" id="attachdlg"
                  modal="true" dynamic="true">
            <h:form prependId="false">
                <h:panelGrid columns="2" style="margin-bottom:10px">
                    <p:outputLabel for="attachtitle" value="#{msgs.title}"/>
                    <p:inputText id="attachtitle" value="#{pIPOrderBn.pOrderDoc.title}"/>
                    <h:outputLabel for="attachcomment" value="#{msgs.global_comment}"/>
                    <p:inputTextarea id="attachcomment" value="#{pIPOrderBn.pOrderDoc.comment}"
                                     rows="5" cols="50"/>
                </h:panelGrid>

                <p:fileUpload fileUploadListener="#{pIPOrderBn.handleFileUpload}"
                              mode="advanced" auto="true"
                              update=":reghome:growl :reghome:messages"
                              multiple="false"
                              sizeLimit="4194304">

                </p:fileUpload>

                <p:commandButton id="adddoc" value="#{msgs.global_submit}"
                                 action="#{pIPOrderBn.addDocument}"
                                 oncomplete="PF('attachdlg').hide()"
                                 update=":reghome:growl :reghome:messages :reghome"/>
            </h:form>
        </p:dialog>

        <p:dialog header="#{msgs.global_withdraw}" widgetVar="withdrawDlg" id="withdrawdlg"
                  modal="true" dynamic="true">
            <h:form prependId="false">
                <h:panelGrid columns="3" style="margin-bottom:10px" cellpadding="10" cellspacing="10">

                    <p:outputLabel value="#{msgs.withdraw_reason}" for="withdrawcomment" styleClass="label"/>
                    <p:editor value="#{pIPOrderBn.pOrderComment.comment}" id="withdrawcomment" required="true"
                              width="700"/>
                    <p:message for="withdrawcomment"/>
                </h:panelGrid>
                <p:commandButton value="#{msgs.global_submit}" action="#{pIPOrderBn.withdraw}"
                                 oncomplete="PF('withdrawDlg').hide()" ajax="false"/>
            </h:form>
        </p:dialog>

        <p:dialog header="#{msgs.upload_document_msg}" widgetVar="uploaddocdlg" resizable="false" id="uploaddocdlg"
                  modal="true" dynamic="true">
            <table border="1" cellspacing="0" cellpadding="0">
                <thead>
                <tr>
                    <td valign="top"><p><b>Sr. No.</b></p></td>
                    <td valign="top"><p><b>PIP/PO checklist type</b></p></td>
                    <td valign="top"><p><b>Documents to be uploaded</b></p></td>
                </tr>

                </thead>
                <tbody>
                <tr>
                    <td rowspan="6" valign="top"><p><b>1.</b></p></td>
                    <td rowspan="6" valign="top"><p><b>UN Agency Checklist</b></p></td>
                    <td valign="top"><p>Official application letter</p></td>
                </tr>

                <tr>
                    <td valign="top"><p>Authorized UN Agency </p></td>
                </tr>

                <tr>
                    <td valign="top"><p>Support letter </p></td>
                </tr>

                <tr>
                    <td valign="top"><p>An agreement between the UN agency and FMoH, RHB or Recipient </p></td>
                </tr>

                <tr>
                    <td valign="top"><p>Donation certificate </p></td>
                </tr>

                <tr>
                    <td valign="top"><p>Performa Invoice</p></td>
                </tr>

                <tr>
                    <td rowspan="8" valign="top"><p><b>2.</b></p></td>
                    <td rowspan="8" valign="top"><p><b>NGO checklist</b></p></td>
                    <td valign="top"><p>Official application letter</p></td>
                </tr>

                <tr>
                    <td valign="top"><p>Valid License of the NGO from ministry of justice</p></td>
                </tr>

                <tr>
                    <td valign="top"><p>Support letter from FMoH or RHBs,</p></td>
                </tr>

                <tr>
                    <td valign="top"><p>An agreement between the donor and FMoH or RHBs or Recipient</p></td>
                </tr>

                <tr>
                    <td valign="top"><p>Donation certificate </p></td>
                </tr>

                <tr>
                    <td valign="top"><p>Performa invoice</p></td>
                </tr>

                <tr>
                    <td valign="top">
                        <p>Certificate of origin or at least manufacturers name and address, as appropriate</p></td>
                </tr>

                <tr>
                    <td valign="top">
                        <p>Commitment letter that describes the product will not be sold to other institutions</p></td>
                </tr>

                <tr>
                    <td rowspan="5" valign="top"><p><b>3.</b></p></td>
                    <td rowspan="5" valign="top"><p><b>Health professional donation </b></p></td>
                    <td valign="top"><p>Official application letter </p></td>
                </tr>

                <tr>
                    <td valign="top"><p>A support letter from health institution or RHB or FMoH or Recipient</p></td>
                </tr>

                <tr>
                    <td valign="top"><p>Agreement (memorandum of understanding)</p></td>
                </tr>

                <tr>
                    <td valign="top"><p>Donation certificate</p></td>
                </tr>

                <tr>
                    <td valign="top"><p>Registration status of the products in the country of origin</p></td>
                </tr>

                <tr>
                    <td rowspan="7" valign="top"><p><b>4.</b></p></td>
                    <td rowspan="7" valign="top"><p><b>Public institution donation</b></p></td>
                    <td valign="top"><p>Official application letter </p></td>
                </tr>

                <tr>
                    <td valign="top">
                        <p>A valid copy of license (certificate of competence) issued to the institution</p></td>
                </tr>

                <tr>
                    <td valign="top">
                        <p>A valid copy of License issued by ministry of justice (if application for procurement is by NGOâ€™s)</p>
                    </td>
                </tr>

                <tr>
                    <td valign="top"><p>Donation certificate</p></td>
                </tr>

                <tr>
                    <td valign="top"><p>Letter of commitment that the products will not be sold</p></td>
                </tr>

                <tr>
                    <td valign="top">
                        <p>A confirmatory letter that the products mentioned in the purchase orders are not available in the local market or confirmed out of stock by importers</p>
                    </td>
                </tr>

                <tr>
                    <td valign="top"><p>Performa invoice</p></td>
                </tr>

                <tr>
                    <td rowspan="6" valign="top"><p><b>5.</b></p></td>
                    <td rowspan="6" valign="top"><p><b>Universities/research institute importation checklist</b></p>
                    </td>
                    <td valign="top"><p>Official application letter </p></td>
                </tr>

                <tr>
                    <td valign="top">
                        <p>An approval letter issued by FMHACA, if the study is a trial involving human subjects</p>
                    </td>
                </tr>

                <tr>
                    <td valign="top"><p>Letter of commitment that the products will not be sold</p></td>
                </tr>

                <tr>
                    <td valign="top"><p>Donation certificate</p></td>
                </tr>

                <tr>
                    <td valign="top">
                        <p>Supporting letters from the universities or the research institution stating that such procurement is only for research purposes</p>
                    </td>
                </tr>

                <tr>
                    <td valign="top"><p>Performa invoice</p></td>
                </tr>

                <tr>
                    <td rowspan="4" valign="top"><p><b>6.</b></p></td>
                    <td rowspan="4" valign="top"><p><b>Importation for special condition </b></p></td>
                    <td valign="top"><p>Official application letter addressed to FMHACA higher official</p></td>
                </tr>

                <tr>
                    <td valign="top">
                        <p>Supporting letter from FMoH for natural or manmade disaster or emergency aids</p></td>
                </tr>

                <tr>
                    <td valign="top"><p>Donation certificate</p></td>
                </tr>

                <tr>
                    <td valign="top"><p>Supporting letter from Foreign Affairs for diplomatic missions</p></td>
                </tr>

                <tr>
                    <td rowspan="4" valign="top"><p><b>7.</b></p></td>
                    <td rowspan="4" valign="top"><p><b>Raw material importation</b></p></td>
                    <td valign="top"><p>Official application letter addressed to FMHACA </p></td>
                </tr>

                <tr>
                    <td valign="top"><p>Certificate of competence for the manufacturer issued by FMHACA</p></td>
                </tr>

                <tr>
                    <td valign="top"><p>Performa invoice</p></td>
                </tr>

                <tr>
                    <td valign="top"><p>GMP Certificate</p></td>
                </tr>

                <tr>
                    <td rowspan="2" valign="top"><p><b>8.</b></p></td>
                    <td rowspan="2" valign="top"><p><b>PO checklist</b></p></td>
                    <td valign="top"><p>Performa invoices</p></td>
                </tr>

                <tr>
                    <td valign="top"></td>
                </tr>

                </tbody>
            </table>

        </p:dialog>
    </ui:define>
</ui:composition>
