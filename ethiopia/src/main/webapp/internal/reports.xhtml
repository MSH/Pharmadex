<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                template="../templates/admin_layout.xhtml">
    <ui:define name="content">
        <h:form id="report">
            <h:panelGrid columns="2" columnClasses="menu,content" cellspacing="20px" cellpadding="20px">
                <p:menu style="width:198px">
                    <p:submenu label="Customer Service staff" icon="ui-icon-gear" rendered="#{userSession.csd||userSession.admin||userSession.cst}">
                        <p:menuitem  value="Overall Application Status and Processing Time"
                                    action="#{kpiBean.prepareReport1CSD}"
                                    ajax="false"
                        />
                        <p:menuitem value=" Applcations Status by Employee"
                                    action="#{kpiBean.prepareReport2CSD}"
                                    ajax="false"
                        />
                        <p:menuitem value="List of Applications, Status and Processing Time"
                                    action="#{kpiBean.prepareReport3CSD}"
                                    ajax="false"
                        />
                    </p:submenu>
                    <p:submenu label="Registration staff" icon="ui-icon-gear" rendered="#{userSession.head||userSession.admin||userSession.moderator}">
                        <p:menuitem value="Overall Application Status and Processing Time"
                                    action="#{kpiBean.prepareReport1RegD}"
                                    ajax="false"
                        />
                        <p:menuitem value=" Applcations Status by Employee"
                                    action="#{kpiBean.prepareReport2Reg}"
                                    ajax="false"
                        />
                        <p:menuitem value="List of Applications, Status and Processing Time"
                                    action="#{kpiBean.prepareReport3Reg}"
                                    ajax="false"
                        />

                    </p:submenu>
                </p:menu>
                <h:panelGroup>
                    <p:messages id="messages" showDetail="true" showSummary="true"/>
                    <p:growl id="growl" showDetail="true" showSummary="true"/>
                    <p:panel id="data" columns="3" cellspacing="10px" columnClasses="col1, col2, col3" >
                        <p:outputLabel value="Start date: " for="startd"/>
                        <p:calendar id="startd" value="#{kpiBean.startDate}" mindate="03-03-2017" showOn="button" required="false"/>
                        <p:message for="startd"/>

                        <p:outputLabel value="End date: " for="endd"/>
                        <p:calendar id="endd" value="#{kpiBean.endDate}" showOn="button" required="false"/>
                        <p:message for="endd"/>

                        <p:outputLabel value="Employee: " for="employee" rendered="#{kpiBean.executorVisible and kpiBean.department=='CSD'}"/>
                        <p:autoComplete id="employee" value="#{kpiBean.employee}"
                                        cache="false"
                                        completeMethod="#{globalEntityLists.completeCSOList}"
                                        dropdown="true" required="false" var="person"
                                        itemLabel="#{person.name}"
                                        itemValue="#{person.userId}"
                                        forceSelection="true"
                                        rendered="#{kpiBean.executorVisible and kpiBean.department=='CSD'}"
                                        converter="#{userConverter}">
                        </p:autoComplete>
                        <p:message for="employee" rendered="#{kpiBean.executorVisible}"/>

                        <p:outputLabel value="Employee: " for="employee" rendered="#{kpiBean.executorVisible and kpiBean.department=='RD'}"/>
                        <p:autoComplete id="employeeR" value="#{kpiBean.employee}"
                                        cache="false"
                                        completeMethod="#{globalEntityLists.completeRegistratorList()}"
                                        dropdown="true" required="false" var="person"
                                        itemLabel="#{person.name}"
                                        itemValue="#{person.userId}"
                                        forceSelection="true"
                                        rendered="#{kpiBean.executorVisible and kpiBean.department=='RD'}"
                                        converter="#{userConverter}">
                        </p:autoComplete>
                        <p:message for="employeeR" rendered="#{kpiBean.executorVisible}"/>

                        <p:outputLabel/>
                        <p:outputLabel/>
                        <p:outputLabel/>
                        <p:commandButton value="Show report"
                                         action="#{kpiBean.startRepo}"
                                         rendered="#{kpiBean.reportKind!='0'}"
                                         process="@form"
                                         update="reportTable"
                        />
                    </p:panel>
                    <p:panel id="reportTable" header="#{kpiBean.reportType}" >
                        <p:dataTable id="timetable" var="apps" value="#{kpiBean.results3}"
                                     tableStyle="table-layout: auto;"
                                     style="width:100%;"
                                     rendered="#{kpiBean.reportKind=='3' and kpiBean.department=='CSD'}">
                            <p:column headerText="Application number"  >
                                <h:outputText value="#{apps.appNo}"/>
                            </p:column>
                            <p:column headerText="Submited" style="text-align:center" width="70">
                                <h:outputText value="#{apps.queued}" style="text-align:right"/>
                            </p:column>
                            <p:column headerText="Pre-screened" style="text-align:center" width="70">
                                <h:outputText value="#{apps.pre_screening}" style="text-align:right"/>
                            </p:column>
                            <p:column headerText="Returned for completeness" style="text-align:center" width="90">
                                <h:outputText value="#{apps.underReview}" style="text-align:right"/>
                            </p:column>
                            <p:column headerText="Approved" style="text-align:center"  width="70">
                                <h:outputText value="#{apps.approved}" style="text-align:right"/>
                            </p:column>
                            <p:column headerText="Rejected" style="text-align:center" width="70">
                                <h:outputText value="#{apps.rejected}" style="text-align:right"/>
                            </p:column>
                            <p:column headerText="Total" style="text-align:center" width="100">
                                <h:outputText value="#{apps.total}" style="text-align:right"/>
                            </p:column>
                        </p:dataTable>
                        <p:dataTable id="timetable2" var="apps" value="#{kpiBean.results3}"
                                     style="width:100%;"
                                     rendered="#{kpiBean.reportKind=='3' and kpiBean.department=='RD'}">
                            <p:column headerText="Application number" styleClass="chkYesNoEdit">
                                <h:outputText value="#{apps.appNo}"/>
                            </p:column>
                            <p:column headerText="Queue" style="text-align:center" width="70">
                                <h:outputText value="#{apps.queued}" style="text-align:right"/>
                            </p:column>
                            <p:column headerText="Reviewed" style="text-align:center" width="70">
                                <h:outputText value="#{apps.underReview}" style="text-align:right"/>
                            </p:column>
                            <p:column headerText="Another review operations" style="text-align:center" width="70">
                                <h:outputText value="#{apps.waiting}" style="text-align:right"/>
                            </p:column>
                            <p:column headerText="Returned for completeness" style="text-align:center" width="90">
                                <h:outputText value="#{apps.fir}" style="text-align:right"/>
                            </p:column>
                            <p:column headerText="Approved" style="text-align:center"  width="70">
                                <h:outputText value="#{apps.approved}" style="text-align:right"/>
                            </p:column>
                            <p:column headerText="Rejected" style="text-align:center" width="70">
                                <h:outputText value="#{apps.rejected}" style="text-align:right"/>
                            </p:column>
                            <p:column headerText="Total" style="text-align:center" width="100">
                                <h:outputText value="#{apps.total}" style="text-align:right"/>
                            </p:column>
                        </p:dataTable>

                        <p:dataTable id="overall" var="ovrall" value="#{kpiBean.results1}" style="width:100%;" rendered="#{kpiBean.reportKind=='1'}">
                            <p:column headerText="Indicator" style="text-align:center" width="170">
                                <h:outputText value="#{ovrall.kpiName}" style="text-align:right"/>
                            </p:column>
                            <p:column headerText="New molecule" style="text-align:center" width="40">
                                <h:outputText value="#{ovrall.regNewMol}" style="text-align:right"/>
                            </p:column>
                            <p:column headerText="Generic with Bio- equivalence" style="text-align:center" width="40">
                                <h:outputText value="#{ovrall.regGBE}" style="text-align:right"/>
                            </p:column>
                            <p:column headerText="Generic without Bio- equivalence" style="text-align:center" width="40">
                                <h:outputText value="#{ovrall.regGWoBE}" style="text-align:right"/>
                            </p:column>
                            <p:column headerText="Variation" style="text-align:center" width="40">
                                <h:outputText value="#{ovrall.variation}" style="text-align:right"/>
                            </p:column>
                            <p:column headerText="Renewal" style="text-align:center" width="40">
                                <h:outputText value="#{ovrall.renew}" style="text-align:right"/>
                            </p:column>
                            <!--
                            <p:column headerText="Suspension/ Cancellation" style="text-align:center" width="40">
                                <h:outputText value="#{ovrall.suspCanc}" style="text-align:right"/>
                            </p:column>
                            -->
                            <p:column headerText="Purchase order" style="text-align:center" width="40">
                                <h:outputText value="#{ovrall.po}" style="text-align:right"/>
                            </p:column>
                            <p:column headerText="Pre-import order" style="text-align:center" width="40">
                                <h:outputText value="#{ovrall.pip}" style="text-align:right"/>
                            </p:column>

                            <p:column headerText="Total" style="text-align:center" width="50">
                                <h:outputText value="#{ovrall.total}" style="text-align:right"/>
                            </p:column>
                        </p:dataTable>
                        <p:dataTable id="overallReg" var="ovrallr" value="#{kpiBean.results1r}"  style="width:100%;" rendered="#{kpiBean.reportKind=='1R'}">
                            <p:columnGroup type="header" style="text-align:center">
                                <p:row>
                                    <p:column rowspan="3" width="170" headerText="Indicator" />
                                    <p:column colspan="12" headerText="Application type" />
                                    <p:column rowspan="3" headerText="Total"/>
                                </p:row>
                                <p:row>
                                    <p:column colspan="3" headerText="New molecule" />
                                    <p:column colspan="3" headerText="Generic with bio- equivalence" />
                                    <p:column colspan="3" headerText="Generic without bio- equivalence" />
                                    <p:column rowspan="2" headerText="Renewal" />
                                    <p:column rowspan="2" headerText="Variation" />
                                    <p:column rowspan="2" headerText="Suspension/ Cancellation" />
                                </p:row>
                                <p:row>
                                    <p:column headerText="Normal"/>
                                    <p:column headerText="SRA"/>
                                    <p:column headerText="Fast Track"/>
                                    <p:column headerText="Normal"/>
                                    <p:column headerText="SRA"/>
                                    <p:column headerText="Fast"/>
                                    <p:column headerText="Normal"/>
                                    <p:column headerText="SRA"/>
                                    <p:column headerText="Fast Track"/>
                                </p:row>
                            </p:columnGroup>

                            <p:column >
                                <h:outputText value="#{ovrallr.kpiName}" style="text-align:left"/>
                            </p:column>
                            <p:column width="40">
                                <h:outputText value="#{ovrallr.regNewMol}" style="text-align:right"/>
                            </p:column>
                            <p:column width="40">
                                <h:outputText value="#{ovrallr.regNewMolSRA}" style="text-align:right"/>
                            </p:column>
                            <p:column width="40">
                                <h:outputText value="#{ovrallr.regNewMolFast}" style="text-align:right"/>
                            </p:column>

                            <p:column width="40">
                                <h:outputText value="#{ovrallr.regGBE}" style="text-align:right"/>
                            </p:column>
                            <p:column width="40">
                                <h:outputText value="#{ovrallr.regGBESRA}" style="text-align:right"/>
                            </p:column>
                            <p:column width="40">
                                <h:outputText value="#{ovrallr.regGBEFast}" style="text-align:right"/>
                            </p:column>

                            <p:column width="40">
                                <h:outputText value="#{ovrallr.regGWoBE}" style="text-align:right"/>
                            </p:column>
                            <p:column width="40">
                                <h:outputText value="#{ovrallr.regGWoBESRA}" style="text-align:right"/>
                            </p:column>
                            <p:column width="40">
                                <h:outputText value="#{ovrallr.regGWoBEFast}" style="text-align:right"/>
                            </p:column>

                            <p:column headerText="Renewal" style="text-align:center" width="40">
                                <h:outputText value="#{ovrallr.renew}" style="text-align:right"/>
                            </p:column>

                            <p:column headerText="Variation" style="text-align:center" width="40">
                                <h:outputText value="#{ovrallr.variation}" style="text-align:right"/>
                            </p:column>

                            <p:column headerText="Suspension/ Cancellation" style="text-align:center" width="40">
                                <h:outputText value="#{ovrallr.suspCanc}" style="text-align:right"/>
                            </p:column>

                            <p:column headerText="Total" style="text-align:center" width="50">
                                <h:outputText value="#{ovrallr.total}" style="text-align:right"/>
                            </p:column>

                        </p:dataTable>
                    </p:panel>
                </h:panelGroup>
            </h:panelGrid>
        </h:form>
    </ui:define>
</ui:composition>