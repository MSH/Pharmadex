<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core">

    <p:accordionPanel value="Product Information" activeIndex="0,1,2,3,4,5,6,7,8,9,10" multiple="true" id="prodsummaccpnl">
        <p:tab title="#{msgs.applicant_detail}"
               rendered="#{userSession.staff||userSession.moderator||userSession.reviewer || userSession.admin}">
            <ui:decorate template="/templates/applicantdetailtmpl.xhtml">
                <ui:param name="applicantdata" value="#{prodAppData.applicant}"/>
                <ui:param name="input" value="#{false}"/>
            </ui:decorate>
        </p:tab>

        <p:tab title="#{msgs.person_responsible}"
               rendered="#{userSession.staff||userSession.moderator||userSession.reviewer || userSession.admin}">
            <ui:decorate template="/templates/userdetailtmpl.xhtml">
                <ui:param name="userdata" value="#{prodAppData.applicantUser}"/>
                <ui:param name="input" value="#{false}"/>
            </ui:decorate>
        </p:tab>

        <p:tab title="#{msgs.product_details}">
            <p:panelGrid cellspacing="10" style="width: 100%;">
	            <p:row>
	            	<p:column styleClass="col1_top">
	            		<p:outputLabel value="#{msgs.prod_app_type}"/>
	            	</p:column>
	            	<p:column styleClass="col2_top">
	            		<p:outputLabel value="#{msgs[prodAppData.prodAppType.key]}"/>
	            	</p:column>
	            	<p:column styleClass="col1_top">
	            		<p:outputLabel value="#{msgs.prod_cat}"/>
	            	</p:column>
	            	<p:column styleClass="col2_top">
	            		<p:outputLabel value="#{msgs[prodAppData.product.prodCategory.key]}"/>
	            	</p:column>
	            </p:row>
	            <p:row>
	            	<p:column styleClass="col1_top">
	            		<p:outputLabel value="#{msgs.prodName}"/>
	            	</p:column>
	            	<p:column styleClass="col2_top">
	            		 <p:outputLabel value="#{prodAppData.product.prodName}"/>
	            	</p:column>
	            	<p:column styleClass="col1_top"> </p:column>
	            	<p:column styleClass="col2_top"> </p:column>
	            </p:row>
	            <p:row>
	            	<p:column styleClass="col1_top">
	            		<p:outputLabel value="#{msgs.prodgenname}"/>
	            	</p:column>
	            	<p:column styleClass="col2_top">
	            		 <p:outputLabel value="#{prodAppData.product.genName}"/>
	            	</p:column>
	            	<p:column styleClass="col1_top"> </p:column>
	            	<p:column styleClass="col2_top"> </p:column>
	            </p:row>
				<p:row>
	            	<p:column styleClass="col1_top">
	            		<p:outputLabel value="#{msgs.dos_form}"/>
	            	</p:column>
	            	<p:column styleClass="col2_top">
	            		<p:outputLabel value="#{prodAppData.product.dosForm.dosForm}"/>
	            	</p:column>
	            	<p:column styleClass="col1_top">
	            		<p:outputLabel value="#{msgs.dos_unit}"/>
	            	</p:column>
	            	<p:column styleClass="col2_top">
	            		<p:outputLabel value="#{prodAppData.product.dosUnit.uom}"/>
	            	</p:column>
	            </p:row>
	            <p:row>
	            	<p:column styleClass="col1_top">
	            		<p:outputLabel value="#{msgs.dos_strength}"/>
	            	</p:column>
	            	<p:column styleClass="col2_top">
	            		 <p:outputLabel value="#{prodAppData.product.dosStrength}"/>
	            	</p:column>
	            	<p:column styleClass="col1_top"> </p:column>
	            	<p:column styleClass="col2_top"> </p:column>
	            </p:row>
				<p:row>
	            	<p:column styleClass="col1_top">
	            		<p:outputLabel value="#{msgs.admin_route}"/>
	            	</p:column>
	            	<p:column styleClass="col2_top">
	            		<p:outputLabel value="#{msgs[prodAppData.product.adminRoute.key]}"/>
	            	</p:column>
	            	<p:column styleClass="col1_top">
	            		<p:outputLabel value="#{msgs.age_group}"/>
	            	</p:column>
	            	<p:column styleClass="col2_top">
	            		<p:outputLabel value="#{msgs[prodAppData.product.ageGroup.key]}"/>
	            	</p:column>
	            </p:row>
	            <p:row>
	            	<p:column styleClass="col1_top">
	            		<p:outputLabel value="#{msgs.prod_desc}"/>
	            	</p:column>
	            	<p:column styleClass="col2_top">
	            		 <p:outputLabel value="#{prodAppData.product.prodDesc}"/>
	            	</p:column>
	            	<p:column styleClass="col1_top"> </p:column>
	            	<p:column styleClass="col2_top"> </p:column>
	            </p:row>
            </p:panelGrid>
        </p:tab>

        <p:tab title="#{msgs.inn_header}" rendered="#{userSession.staff||userSession.moderator||userSession.reviewer||userSession.inspector || userSession.admin}">
        	<h:panelGrid columns="2" cellspacing="10" columnClasses="col1_top, col4">
        		<p:outputLabel value="#{msgs.inn_header}"/>
				<p:dataTable id="innsummarytbl" var="prodInn" value="#{prodAppData.product.inns}">
					<p:column headerText="#{msgs.active_substance}">
						<h:outputText value="#{prodInn.inn.name}" style="#{processProdBnNA.findInnChanged()?('color:red;'):('color:black;')}" />
					</p:column>

					<p:column headerText="#{msgs.dos_strength}">
						<h:outputText value="#{prodInn.dosStrength}" style="#{processProdBnNA.findInnChanged()?('color:red;'):('color:black;')}" />
					</p:column>

					<p:column headerText="#{msgs.dos_unit}">
						<h:outputText value="#{prodInn.dosUnit.uom}" style="#{processProdBnNA.findInnChanged()?('color:red;'):('color:black;')}" />
					</p:column>

					<p:column headerText="#{msgs.inn_ref}">
						<h:outputText value="#{prodInn.refStd}" style="#{processProdBnNA.findInnChanged()?('color:red;'):('color:black;')}" />
					</p:column>
				</p:dataTable>
				<p:outputLabel value="#{msgs.product_active}"/>
				<p:dataTable id="expsummarytbl" var="prodExp" value="#{prodAppData.product.excipients}" style="width:100%;">
					<p:column headerText="#{msgs.active_substance}">
						<h:outputText value="#{prodExp.excipient.name}" style="#{processProdBnNA.findExcipientChanged()?('color:red;'):('color:black;')}" />
					</p:column>

					<p:column headerText="#{msgs.dos_strength}">
						<h:outputText value="#{prodExp.dosStrength}" style="#{processProdBnNA.findExcipientChanged()?('color:red;'):('color:black;')}" />
					</p:column>

					<p:column headerText="#{msgs.dos_unit}">
						<h:outputText value="#{prodExp.dosUnit.uom}" style="#{processProdBnNA.findExcipientChanged()?('color:red;'):('color:black;')}" />
					</p:column>

					<p:column headerText="#{msgs.inn_ref}">
						<h:outputText value="#{prodExp.refStd}" style="#{processProdBnNA.findExcipientChanged()?('color:red;'):('color:black;')}" />
					</p:column>
				</p:dataTable>
			</h:panelGrid>
        </p:tab>

        <p:tab title="#{msgs.atc_header}" rendered="#{userSession.staff||userSession.moderator||userSession.reviewer}">
            <h:panelGrid columns="2" cellspacing="10" columnClasses="col1_top, col4">
	            <p:outputLabel value="#{msgs.atc_header}"/>
	            <p:dataTable id="atcsummarytable" var="atc" value="#{prodAppData.product.atcs}" style="width:100%;">
			        <p:column headerText="#{msgs.atc_code}">
			        	<h:outputText value="#{atc.atcCode}"  style="#{processProdBnNA.findAtcChanged()?('color:red;'):('color:black;')}"/>
			        </p:column>
			
			        <p:column headerText="#{msgs.atc_name}">
			       		<h:outputText value="#{atc.atcName}"  style="#{processProdBnNA.findAtcChanged()?('color:red;'):('color:black;')}"/>
			        </p:column>
		        </p:dataTable>
			</h:panelGrid>
        </p:tab>

        <p:tab title="#{msgs.application_detail}">
        	<p:panelGrid cellspacing="10" style="width: 100%;" >
	            <p:row>
	            	<p:column styleClass="col1_top">
	            		<h:outputLabel value="#{msgs.product_shelflife}"/>
	            	</p:column>
	            	<p:column styleClass="col2_top">
	            		<ui:fragment   rendered="#{processProdBnNA.isFieldChanged('ShelfLife')}">
		                     <div>
		                      	<h:outputLabel value="#{prodAppData.product.shelfLife}" style="color:red;"/>
		                     </div>
		                 </ui:fragment>            
		                 <ui:fragment   rendered="#{!processProdBnNA.isFieldChanged('ShelfLife')}">
		                     <div>
		                      	<h:outputLabel value="#{prodAppData.product.shelfLife}"/>
		                     </div>
		                </ui:fragment>   
	            	</p:column>
	            	<p:column styleClass="col1_top">
	            		<h:outputLabel value="#{msgs.product_packsize}"/>
	            	</p:column>
	            	<p:column styleClass="col2_top">
	            		<ui:fragment   rendered="#{processProdBnNA.isFieldChanged('PackSize')}">
		                    <div>
		                      <h:outputLabel value="#{prodAppData.product.packSize}" style="color:red;"/>
		                   </div>
		                </ui:fragment>            
		                  <ui:fragment   rendered="#{!processProdBnNA.isFieldChanged('PackSize')}">
		                    <div>
		                      <h:outputLabel value="#{prodAppData.product.packSize}" />
		                   </div>
		                </ui:fragment>
	            	</p:column>
	            </p:row>
	            <p:row>
	            	<p:column styleClass="col1_top">
	            		<h:outputLabel value="#{msgs.product_conttype}"/>
	            	</p:column>
	            	<p:column styleClass="col2_top">
	            		<ui:fragment   rendered="#{processProdBnNA.isFieldChanged('ContType')}">
		                    <div>
		                      <h:outputLabel value="#{prodAppData.product.contType}" style="color:red;"/>
		                   </div>
		                </ui:fragment>
		                 <ui:fragment   rendered="#{!processProdBnNA.isFieldChanged('ContType')}">
		                    <div>
		                       <h:outputLabel value="#{prodAppData.product.contType}" />
		                   </div>
		                </ui:fragment>
	            	</p:column>
	            	<p:column styleClass="col1_top">
	            		<h:outputLabel value="#{msgs.product_storcndtn}"/>
	            	</p:column>
	            	<p:column styleClass="col2_top">
	            		<ui:fragment   rendered="#{processProdBnNA.isFieldChanged('Storage')}">
		                    <div>
		                      <h:outputLabel value="#{prodAppData.product.storageCndtn}" style="color:red;"/>
		                     </div>
		                </ui:fragment> 
		                 <ui:fragment   rendered="#{!processProdBnNA.isFieldChanged('Storage')}">
		                    <div>
		                      <h:outputLabel value="#{prodAppData.product.storageCndtn}" />
		                     </div>
		                </ui:fragment>
	            	</p:column>
	            </p:row>
	            <p:row>
	            	<p:column styleClass="col1_top">
	            		<h:outputLabel value="#{msgs.prod_indications}"/>
	            	</p:column>
	            	<p:column styleClass="col2_top">
	            		<ui:fragment   rendered="#{processProdBnNA.isFieldChanged('Indications')}">
		                    <div>
		                      <h:outputLabel value="#{prodAppData.product.indications}" style="color:red;"/>
		                     </div>
		                </ui:fragment> 
		                <ui:fragment   rendered="#{!processProdBnNA.isFieldChanged('Indications')}">
		                    <div>
		                      <h:outputLabel value="#{prodAppData.product.indications}" />
		                     </div>
		                </ui:fragment>
	            	</p:column>
	            	<p:column styleClass="col1_top">
	            		<h:outputLabel value="#{msgs.prod_posology}"/>
	            	</p:column>
	            	<p:column styleClass="col2_top">
	            		<ui:fragment   rendered="#{processProdBnNA.isFieldChanged('Posology')}">
		                    <div>
		                      <h:outputLabel value="#{prodAppData.product.posology}" style="color:red;"/>
		                    </div>
		                </ui:fragment>
		                   <ui:fragment   rendered="#{!processProdBnNA.isFieldChanged('Posology')}">
		                    <div>
		                      <h:outputLabel value="#{prodAppData.product.posology}" />
		                    </div>
		                </ui:fragment>
	            	</p:column>
	            </p:row>
			</p:panelGrid>
        </p:tab>

        <p:tab title="#{msgs.appl_status_country}"
               rendered="#{userSession.staff||userSession.moderator||userSession.reviewer}">
            <p:dataTable id="foreignStatusTable" var="appstatus" value="#{foreignAppStatus}"
                         style="width:100%;">
                <p:column headerText="#{msgs.applicant_country}">
                    <h:outputText value="#{appstatus.country.countryName}"/>
                </p:column>

                <p:column headerText="#{msgs.foreign_country_status_type}">
                    <h:outputText value="#{msgs[appstatus.foreignAppStatusType.key]}"/>
                </p:column>

                <p:column headerText="#{msgs.prod_name}">
                    <h:outputText value="#{appstatus.prodName}"/>
                </p:column>

                <p:column headerText="#{msgs.mkt_auth_holder}">
                    <h:outputText value="#{appstatus.mktAuthHolder}"/>
                </p:column>

                <p:column headerText="#{msgs.mkt_auth_date}">
                    <h:outputText value="#{appstatus.mktAuthDate}">
                        <f:convertDateTime pattern="MMM dd, yyyy"/>
                    </h:outputText>
                </p:column>
            </p:dataTable>
        </p:tab>

        <p:tab title="#{msgs.manufacturer_detail}">
            <p:dataTable id="companyTable" var="company" value="#{processProdBnNA.prodCompanies}"
                         style="width:100%;">
                <p:column headerText="#{msgs.applicant_name}">
                    <h:outputText value="#{company.company.companyName}" style="#{processProdBnNA.findCompaniesChanged()?('color:red;'):('color:black;')}"/>
                </p:column>

                <p:column headerText="#{msgs.applicant_country}">
                    <h:outputText value="#{company.company.address.country.countryName}" style="#{processProdBnNA.findCompaniesChanged()?('color:red;'):('color:black;')}"/>
                </p:column>

                <p:column headerText="#{msgs.applicant_type}">
                    <h:outputText value="#{msgs[company.companyType.key]}" style="#{processProdBnNA.findCompaniesChanged()?('color:red;'):('color:black;')}"/>
                </p:column>

                <p:column headerText="#{msgs.applicant_phone}">
                    <h:outputText value="#{company.company.phoneNo}" style="#{processProdBnNA.findCompaniesChanged()?('color:red;'):('color:black;')}"/>
                </p:column>

            </p:dataTable>

        </p:tab>

        <p:tab title="#{msgs.product_pricing_comparison}"
               rendered="#{userSession.displayPricing and (userSession.staff||userSession.moderator||userSession.reviewer)}">
            <p:panelGrid cellspacing="10" style="width: 100%;" >
	            <p:row>
	            	<p:column styleClass="col1_top">
	            		<h:outputLabel value="#{msgs.product_pricing_max}"/>
	            	</p:column>
	            	<p:column styleClass="col2_top">
	            		<h:outputLabel value="#{prodAppData.product.pricing.msrp}"/>
	            	</p:column>
	            	<p:column styleClass="col1_top">
	            		<h:outputLabel value="#{msgs.product_pricing_perdose}"/>
	            	</p:column>
	            	<p:column styleClass="col2_top">
	            		<h:outputLabel value="#{prodAppData.product.pricing.pricePerDose}"/>
	            	</p:column>
				</p:row>
				<p:row>
	            	<p:column styleClass="col1_top">
	            		<h:outputLabel value="#{msgs.product_pricing_perday}"/>
	            	</p:column>
	            	<p:column styleClass="col2_top">
	            		<h:outputLabel value="#{prodAppData.product.pricing.pricePerDay}"/>
	            	</p:column>
	            	<p:column styleClass="col1_top">
	            		<h:outputLabel value="#{msgs.product_pricing_treatcost}"/>
	            	</p:column>
	            	<p:column styleClass="col2_top">
	            		<h:outputLabel value="#{prodAppData.product.pricing.treatCost}"/>
	            	</p:column>
				</p:row>
			</p:panelGrid>

            <p:dataTable id="pricetable" var="price" value="#{prodAppData.product.pricing.drugPrices}"
                         style="width:100%;">
                <p:column headerText="#{msgs.drug_price_name}">
                    <h:outputText value="#{price.drugName}"/>
                </p:column>

                <p:column headerText="#{msgs.drug_price_msrp}">
                    <h:outputText value="#{price.msrp}"/>
                </p:column>
            </p:dataTable>
        </p:tab>

        <p:tab title="#{msgs.payment_info}"
               rendered="#{userSession.staff||userSession.moderator||userSession.reviewer}">
            <p:panelGrid cellspacing="10" style="width: 100%;" >
	            <p:row>
	            	<p:column styleClass="col1_top">
	            		<h:outputLabel value="#{msgs.bank_name}"/>
	            	</p:column>
	            	<p:column styleClass="col2_top">
	            		<h:outputLabel value="#{prodAppData.bankName}"/>
	            	</p:column>
	            	<p:column styleClass="col1_top"/>
	            	<p:column styleClass="col2_top"/>
				</p:row>
				<p:row>
	            	<p:column styleClass="col1_top">
	            		<h:outputLabel value="#{msgs.reciept_no}"/>
	            	</p:column>
	            	<p:column styleClass="col2_top">
	            		<h:outputLabel value="#{prodAppData.receiptNo}"/>
	            	</p:column>
	            	<p:column styleClass="col1_top"/>
	            	<p:column styleClass="col2_top"/>
				</p:row>
				<p:row>
	            	<p:column styleClass="col1_top">
	            		<h:outputLabel value="#{msgs.fee_submit_date}"/>
	            	</p:column>
	            	<p:column styleClass="col2_top">
	            		<h:outputLabel id="feesubmitdt" value="#{prodAppData.feeSubmittedDt}">
		                    <f:convertDateTime pattern="MMM dd, yyyy"/>
		                </h:outputLabel>
	            	</p:column>
	            	
				</p:row>
			</p:panelGrid>
        </p:tab>

        <p:tab title="#{msgs.checklist}" rendered="#{userSession.staff||userSession.moderator||userSession.reviewer}">
            <p:dataTable var="checkList" value="#{prodAppChecklists}" style="width:100%;">
                <p:column style="width:100px">
                    <h:outputLabel value="#{checkList.checklist.module}"/>
                </p:column>
                <p:column style="width:60px">
                    <h:outputLabel value="#{checkList.checklist.moduleNo}"/>
                </p:column>
                <p:column>
                    <h:outputLabel value="#{checkList.checklist.name}"/>
                </p:column>
                <p:column style="width:60px">
                    <p:outputLabel value="#{msgs[globalLists.buildKeyMsgs(checkList.value)]}"/>
                </p:column>
            </p:dataTable>
        </p:tab>
    </p:accordionPanel>

</ui:composition>
