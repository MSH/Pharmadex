<!-- Creates the table with passed in values of product -->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui" xmlns:f="http://xmlns.jcp.org/jsf/core">


    <h:panelGrid cellspacing="10" cellpadding="10" columns="4">

        <p:commandButton value="Print" type="button" icon="ui-icon-print">
            <p:printer target="checkListTbl"/>
        </p:commandButton>

        <p:commandButton id="complete" value="#{msgs.global_complete}" oncomplete="PF('completescreendlg').show()"
                         rendered="#{preScreenProdMBnET.displayScreenAction}"/>
        <!--
                <p:commandButton id="sendtoapp" value="#{msgs.send_to_app}" action="#{processProdBnET.initTimeLine}" update=":reghome:processtab:sendtoapplicant"
                                 rendered="#{processProdBnET.displayScreenAction}" oncomplete="PF('sendtoappdlg').show()"/>
        -->
        <p:commandButton id="sendtoapp2" value="#{msgs.send_to_app}" action="#{preScreenProdMBnET.sendToApplicant}"
                         rendered="#{preScreenProdMBnET.displayScreenAction}" ajax="false">
        </p:commandButton>
        <p:commandButton id="feedback" value="#{msgs.global_archive}" update=":reghome:processtab:archiveapp"
                         rendered="#{preScreenProdMBnET.displayScreenAction}" oncomplete="PF('archiveappdlg').show()"/>

    </h:panelGrid>

    <h:panelGrid columns="2" cellpadding="10" cellspacing="10">
        <p:outputLabel value="#{msgs.prescreenfee_recieved}" styleClass="label" for="prescreenfeerecieved"/>
        <p:selectBooleanButton id="prescreenfeerecieved" disabled="#{!processProdBn.prescreened}"
                               value="#{processProdBn.prodApplications.prescreenfeeReceived}"
                               onLabel="#{msgs.global_yes}" offLabel="#{msgs.global_no}"
                               onIcon="ui-icon-check"
                               offIcon="ui-icon-close" style="width:60px">
            <!--<p:ajax update="@form" listener="#{processProdBnET.prescreenfeerecvd}" />-->

        </p:selectBooleanButton>

        <p:outputLabel value="#{msgs.dos_rec_date}" for="dosrecdt" styleClass="label"/>
        <p:calendar value="#{processProdBn.prodApplications.dosRecDate}" id="dosrecdt" showOn="button"/>
    </h:panelGrid>


    <p:dataTable var="checkList" value="#{preScreenProdMBnET.prodAppChecklists}"
                 style="width:100%;" id="checkListTbl">
        <p:column headerText="">
            <h:outputLabel value="#{checkList.checklist.moduleNo}"/>
        </p:column>
        <p:column>
            <h:outputLabel value="#{checkList.checklist.name}"/>
        </p:column>
        <p:column headerText="#{msgs.applicant}">
            <p:outputLabel value="#{checkList.value}"/>
        </p:column>
        <p:column headerText="#{msgs.UserType_STAFF}">
            <p:outputLabel value="#{checkList.staffValue}" rendered="#{!processProdBn.prescreened}"/>
            <p:selectOneButton id="console" value="#{checkList.staffValue}"
                               rendered="#{checkList.checklist.header and processProdBn.prescreened}">
                <f:selectItems value="#{globalLists.yesNoNA}" var="value" itemLabel="#{msgs[value.key]}" />
            </p:selectOneButton>
        </p:column>
        <p:column headerText="#{msgs.global_remark}">
            <p:inputText value="#{checkList.staffComment}" readonly="#{!processProdBn.prescreened}"/>
        </p:column>
        <p:column>
            <p:commandButton icon="ui-icon-document" onclick="PF('moduledlg').show()"
                             action="#{preScreenProdMBnET.setProdAppChecklist(checkList)}"
                             rendered="#{!checkList.fileUploaded}"/>

            <p:commandButton id="downloadLink" value="#{msgs.global_download}" ajax="false"
                             onclick="PrimeFaces.monitorDownload(start, stop)"
                             icon="ui-icon-arrowstop-1-s"
                             rendered="#{checkList.fileUploaded}"
                    >
                <p:fileDownload
                        value="#{fileUploadController.moduleDocDownload(checkList)}"/>
            </p:commandButton>

        </p:column>
    </p:dataTable>


    <p:dialog header="#{msgs.complete_screen}" widgetVar="completescreendlg" resizable="false"
              id="completescreen" appendTo="@form"
              rendered="#{userSession.head||userSession.admin||userSession.staff}">

        <p:panelGrid columns="2" columnClasses="label value">
            <h:outputText value="#{msgs.moderator_name}: "
                          escape="false"
                          styleClass="text"/>

            <p:autoComplete id="mod" value="#{preScreenProdMBnET.moderator}"
                            completeMethod="#{globalEntityLists.completeModeratorList}" dropdown="true"
                            var="it" itemLabel="#{it.name}" itemValue="#{it.userId}"
                            forceSelection="true"
                            converter="#{userConverter}">
            </p:autoComplete>

            <p:outputLabel value="#{msgs.doss_loc}" for="shelfloc"
                    />
            <p:inputText value="#{processProdBn.prodApplications.dossLoc}" id="shelfloc"/>

        </p:panelGrid>


        <p:commandButton id="completescreencb" value="#{msgs.global_submit}"
                         action="#{preScreenProdMBnET.completeScreen}"
                         oncomplete="PF('completescreendlg').hide()" update=":reghome" process="@form"/>

    </p:dialog>

    <p:dialog header="#{msgs.complete_screen}" widgetVar="archiveappdlg" resizable="false"
              id="archiveapp" modal="true" appendTo="@(body)"
              rendered="#{userSession.head||userSession.admin||userSession.staff}">

        <h:form>
            <p:panelGrid columns="2" columnClasses="label value">

                <p:outputLabel value="#{msgs.global_remark}" for="remarkarchive"/>
                <p:inputText value="#{preScreenProdMBnET.timeLine.comment}" id="remarkarchive"/>

            </p:panelGrid>


            <p:commandButton id="archiveappbtn" value="#{msgs.global_submit}"
                             action="#{preScreenProdMBnET.archiveApp}"
                             oncomplete="PF('archiveappdlg').hide()" update=":reghome @form" process="@form"/>
        </h:form>
    </p:dialog>

    <p:dialog header="#{msgs.adddocument}" widgetVar="moduledlg" resizable="true" id="moduleDlg" modal="true"
            >

        <p:fileUpload fileUploadListener="#{preScreenProdMBnET.handleFileUpload}"
                      mode="advanced" auto="true"
                      update=":reghome:growl :reghome:messages"
                      multiple="false"
                      sizeLimit="100000000">

        </p:fileUpload>
            <p:commandButton id="addmoduledoc" value="#{msgs.global_submit}"
                             action="#{preScreenProdMBnET.addModuleDoc}"
                             oncomplete="PF('moduledlg').hide()" update=":reghome:growl :reghome:messages :reghome"
                    />
    </p:dialog>

</ui:composition>
