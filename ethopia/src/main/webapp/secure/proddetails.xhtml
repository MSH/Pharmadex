<!-- Creates the table with passed in values of product -->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui">

    <h:panelGrid columns="3" cellpadding="10px" cellspacing="10px" columnClasses="col1, col2, col3">
        <p:outputLabel value="#{msgs.prod_app_type}" styleClass="fy-required-field"/>
        <!--<p:outputLabel value="#{msgs[prodRegAppMbean.prodApplications.prodAppType.key]}" styleClass="label"/>-->
        <p:outputLabel value="#{prodRegAppMbean.appType}" styleClass="label"/>
        <p:outputLabel/>

        <p:outputLabel value="#{msgs.prod_cat}" for="prodCatcb" styleClass="fy-required-field"/>
        <p:selectOneMenu id="prodCatcb" value="#{prodRegAppMbean.product.prodCategory}" required="true"
                         requiredMessage="#{msgs.valid_prod_type}">
            <f:selectItem itemLabel="-" itemValue=""/>
            <f:selectItems value="#{globalLists.prodCategories}" var="prodcat" itemLabel="#{msgs[prodcat.key]}"/>
        </p:selectOneMenu>
        <p:message for="prodCatcb" showSummary="true" showDetail="false"/>
        <p:outputLabel value="#{msgs.prodName}" for="prodDetailName"/>
        <p:inputText id="prodDetailName" value="#{prodRegAppMbean.product.prodName}" title="Product Name"
                     required="true" requiredMessage="#{msgs.valid_prod_name}" onblur="value=value.toUpperCase()">
        </p:inputText>
        <p:message for="prodDetailName" showSummary="true" showDetail="false"/>

        <p:outputLabel value="#{msgs.prodgenname}" for="prodGenName"/>
        <p:inputText id="prodGenName" value="#{prodRegAppMbean.product.genName}" title="Generic Name"
                     required="true" requiredMessage="#{msgs.valid_gen_name}" onblur="value=value.toUpperCase()"/>
        <p:message for="prodGenName" showSummary="true" showDetail="false"/>

        <p:outputLabel value="#{msgs.inn_ref}" for="pharmacopeia"/>
        <p:inputText id="pharmacopeia" value="#{prodRegAppMbean.product.pharmacopeiaStds}" title="#{msgs.inn_ref}"
                     required="true" requiredMessage="#{msgs.valid_gen_name}"/>
        <p:message for="pharmacopeia" showSummary="true" showDetail="false"/>


        <p:outputLabel value="#{msgs.dos_strength}" for="dosStrength"/>
        <p:inputText id="dosStrength" value="#{prodRegAppMbean.product.dosStrength}" title="DosStrength"
                     required="true" requiredMessage="#{msgs.dos_strength}: Value required">
        </p:inputText>
        <p:message for="dosStrength" severity="error" showSummary="true" showDetail="false"/>
        
        <p:outputLabel value="#{msgs.dos_unit}" for="dosUnit"/>
        <p:autoComplete id="dosUnit" value="#{prodRegAppMbean.product.dosUnit}"
                        completeMethod="#{globalEntityLists.completeDosUom}" dropdown="true"
                        size="50" maxResults="15"
                        var="it" itemLabel="#{it.uom}" itemValue="#{it}" forceSelection="false"
                        converter="#{dosUomConverter}"
                        required="true"
                        requiredMessage="#{msgs.valid_dosUom}">
        </p:autoComplete>
        <p:message for="dosUnit" showSummary="true" showDetail="false"/>

        <p:outputLabel value="#{msgs.dos_form}" for="dosForm"/>
        <p:selectOneMenu id="dosForm" value="#{prodRegAppMbean.product.dosForm.uid}"
                         requiredMessage="#{msgs.valid_dos_form}" required="true">
            <f:selectItem itemLabel="-" itemValue=""/>
            <f:selectItems value="#{globalEntityLists.dosageForms}" var="dosForm" itemLabel="#{msgs[dosForm.key]}"
                           itemValue="#{dosForm.uid}"/>
        </p:selectOneMenu>
        <p:message for="dosForm" showSummary="true" showDetail="false"/>
        <p:outputLabel value="#{msgs.admin_route}" for="adminroutecb"/>
        <p:selectOneMenu id="adminroutecb" value="#{prodRegAppMbean.product.adminRoute.id}" required="true"
                         requiredMessage="#{msgs.valid_value_req}">
            <f:selectItem itemLabel="-" itemValue=""/>
            <f:selectItems value="#{globalEntityLists.adminRoutes}" var="type" itemLabel="#{type.name}"
                           itemValue="#{type.id}"/>
        </p:selectOneMenu>

        <p:message for="adminroutecb" showSummary="true" showDetail="false"/>
        <p:outputLabel value="#{msgs.age_group}" for="ageGroupcb"/>
        <p:selectOneMenu id="ageGroupcb" value="#{prodRegAppMbean.product.ageGroup}" required="true"
                         requiredMessage="#{msgs.valid_prod_type}">
            <f:selectItem itemLabel="-" itemValue=""/>
            <f:selectItems value="#{globalListsET.ageGroupes}" var="ageGrp" itemLabel="#{msgs[ageGrp.key]}"/>
        </p:selectOneMenu>
        <p:message for="ageGroupcb" showSummary="true" showDetail="false"/>

        <p:outputLabel value="#{msgs.product_pharmclassif}" for="pharmClassifcb"/>
        <p:autoComplete id="pharmClassifcb" value="#{prodRegAppMbean.product.pharmClassif}"
                        completeMethod="#{globalEntityLists.completePharmClassif}" dropdown="true"
                        var="it" itemLabel="#{it.name}" itemValue="#{it}" forceSelection="true"
                        required="true"
                        requiredMessage="#{msgs.valid_value_req}"
                >
            <o:converter converterId="omnifaces.ListConverter" list="#{globalEntityLists.pharmClassifs}"/>
        </p:autoComplete>
        <p:message for="pharmClassifcb" showSummary="true" showDetail="false"/>

        <p:outputLabel value="#{msgs.prod_desc}" for="prodDesc"/>
        <p:inputTextarea id="prodDesc" value="#{prodRegAppMbean.product.prodDesc}" rows="4" cols="50"
                         title="ProdDesc"/>
        <p:message for="prodDesc" showSummary="true" showDetail="false"/>

    </h:panelGrid>

    <div align="right">
        <p:commandButton value="#{msgs.prev_applications}"
                         rendered="#{(not empty prodRegAppMbeanET.parentAppId) and (userSession.head or userSession.moderator or userSession.reviewer)}"
                         onclick="PF('parentAppDlg').show();">
            <f:param name="prodAppID" value="#{prodRegAppMbeanET.parentAppId}"/>
        </p:commandButton>

        <p:commandButton value="#{msgs.global_save}" action="#{prodRegAppMbeanET.saveApp}"
                         update=":reghome :reghome:growl" ajax="true" id="proddetailSaveBtn"/>
        <p:commandButton value="#{msgs.global_cancel}" immediate="true"
                         action="#{prodRegAppMbean.cancel}"
                         ajax="false"/>
        <p:commandButton value="#{msgs.prev}" onclick="PF('wizard').back();"
                         id="proddetailBackBtn"/>

        <p:commandButton value="#{msgs.next}" oncomplete="PF('wizard').next();" id="proddetailNxtBtn"
                         action="#{prodRegAppMbeanET.saveApp}"/>
    </div>

    <p:dialog header="#{msgs.global_add} #{msgs.dos_unit}"
              id="addUomDlg" widgetVar="addUomDlg"
              resizable="false"
              modal="true"
              dynamic="true">
        <h:form id="addUomForm">
            <h:panelGrid id="addUomPanel" columns="1" cellpadding="10px" columnClasses="col1, col2">
                <p:outputLabel value="#{msgs.dos_unit}"/>
                <p:inputText value="#{prodRegAppMbeanET.dosUom.uom}" />
                <p:commandButton id="uomSave"
                                 value="#{msgs.global_save}"
                                 oncomplete="PF('addUomDlg').hide()"
                                 action="#{prodRegAppMbeanET.uomSave}"
                                 ajax="false"

                />
            </h:panelGrid>
        </h:form>
    </p:dialog>
</ui:composition>
